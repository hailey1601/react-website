{"file_contents":{"src/components/ChatBot.js":{"content":"import { GoogleGenerativeAI } from \"https://esm.run/@google/generative-ai\";\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nconst ChatBot = ({ user }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const API_KEY = \"AIzaSyD4LdSOcK--ZpvR-QpKiRmp6ACu-7X6Eak\";\r\n  const genAI = new GoogleGenerativeAI(API_KEY);\r\n  const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\r\n\r\n  useEffect(() => {\r\n    const chatBody = document.getElementById(\"chatbot-body\");\r\n    if (chatBody) {\r\n      chatBody.scrollTop = chatBody.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  const addMessage = (text, sender) => {\r\n    setMessages((prev) => [...prev, { text, sender, id: Date.now() }]);\r\n  };\r\n\r\n  const getBotResponse = async (userMessage) => {\r\n    try {\r\n      let prompt = \"\";\r\n\r\n      if (user.role === \"admin\") {\r\n        prompt = `B·∫°n l√† m·ªôt tr·ª£ l√Ω chuy√™n h·ªó tr·ª£ qu·∫£n l√Ω b√†i t·∫≠p. H√£y tr·∫£ l·ªùi c√¢u h·ªèi v·ªÅ qu·∫£n l√Ω b√†i t·∫≠p: \"${userMessage}\"`;\r\n      } else {\r\n        prompt = `B·∫°n l√† m·ªôt tr·ª£ l√Ω h·ªçc t·∫≠p. H√£y gi√∫p ng∆∞·ªùi d√πng ho√†n th√†nh b√†i t·∫≠p v√† tr·∫£ l·ªùi c√¢u h·ªèi: \"${userMessage}\"`;\r\n      }\r\n\r\n      const result = await model.generateContent(prompt);\r\n      let text = result.response.text();\r\n      console.log(\"Original text: \", text);\r\n\r\n      text = text.replace(/\\*\\*(.*?)\\*\\*/gs, \"<strong>$1</strong>\");\r\n      text = text.replace(/(\\d+)\\.\\s/g, \"<strong>$1.</strong> \");\r\n      text = text.replace(/\\n/g, \"<br />\");\r\n\r\n      return text || \"Xin l·ªói, m√¨nh kh√¥ng th·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi n√†y l√∫c n√†y.\";\r\n    } catch (error) {\r\n      console.error(\"L·ªói khi g·ªçi API Gemini:\", error);\r\n      return \"Xin l·ªói, m√¨nh kh√¥ng th·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi n√†y l√∫c n√†y. Vui l√≤ng th·ª≠ l·∫°i sau.\";\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    if (inputMessage.trim() === \"\") return;\r\n\r\n    const userMessage = inputMessage.trim();\r\n    addMessage(userMessage, \"user\");\r\n    setInputMessage(\"\");\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const botResponse = await getBotResponse(userMessage);\r\n      addMessage(botResponse, \"bot\");\r\n    } catch (error) {\r\n      addMessage(\"ƒê√£ x·∫£y ra l·ªói, vui l√≤ng th·ª≠ l·∫°i.\", \"bot\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* N√∫t chatbox */}\r\n      {!isOpen && (\r\n        <button\r\n          onClick={() => setIsOpen(true)}\r\n          style={{\r\n            position: \"fixed\",\r\n            bottom: \"20px\",\r\n            right: \"20px\",\r\n            width: \"60px\",\r\n            height: \"60px\",\r\n            borderRadius: \"50%\",\r\n            background: \"#E28413\",\r\n            border: \"none\",\r\n            color: \"white\",\r\n            fontSize: \"24px\",\r\n            cursor: \"pointer\",\r\n            boxShadow: \"0 4px 12px rgba(0,0,0,0.3)\",\r\n            zIndex: 1000,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          üí¨\r\n        </button>\r\n      )}\r\n\r\n      {/* Chatbox Modal */}\r\n      {isOpen && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            bottom: \"20px\",\r\n            right: \"20px\",\r\n            width: \"350px\",\r\n            height: \"500px\",\r\n            background: \"white\",\r\n            borderRadius: \"12px\",\r\n            boxShadow: \"0 8px 32px rgba(0,0,0,0.3)\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            zIndex: 1001,\r\n            border: \"1px solid #e2e8f0\",\r\n          }}\r\n        >\r\n          {/* Header */}\r\n          <div\r\n            style={{\r\n              background: \"#E28413\",\r\n              color: \"white\",\r\n              padding: \"16px\",\r\n              borderTopLeftRadius: \"12px\",\r\n              borderTopRightRadius: \"12px\",\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            <h3 style={{ margin: 0, fontSize: \"16px\", fontWeight: \"600\" }}>\r\n              {user.role === \"admin\"\r\n                ? \"Tr·ª£ l√Ω qu·∫£n l√Ω b√†i t·∫≠p\"\r\n                : \"Tr·ª£ l√Ω h·ªçc t·∫≠p\"}\r\n            </h3>\r\n            <button\r\n              onClick={() => setIsOpen(false)}\r\n              style={{\r\n                background: \"none\",\r\n                border: \"none\",\r\n                color: \"white\",\r\n                fontSize: \"18px\",\r\n                cursor: \"pointer\",\r\n                padding: \"4px\",\r\n              }}\r\n            >\r\n              x\r\n            </button>\r\n          </div>\r\n\r\n          {/* Chat body */}\r\n          <div\r\n            id=\"chatbot-body\"\r\n            style={{\r\n              flex: 1,\r\n              padding: \"16px\",\r\n              overflowY: \"auto\",\r\n              background: \"#f8fafc\",\r\n            }}\r\n          >\r\n            {messages.length === 0 && (\r\n              <div\r\n                style={{\r\n                  textAlign: \"center\",\r\n                  color: \"#64748b\",\r\n                  fontSize: \"14px\",\r\n                  marginTop: \"20px\",\r\n                }}\r\n              >\r\n                {user.role === \"admin\"\r\n                  ? \"Ch√†o admin! T√¥i c√≥ th·ªÉ h·ªó tr·ª£ b·∫°n qu·∫£n l√Ω b√†i t·∫≠p.\"\r\n                  : \"H√£y c√πng nhau ho√†n th√†nh b√†i n√†o! T√¥i s·∫Ω h·ªó tr·ª£ b·∫°n h·ªçc t·∫≠p hi·ªáu qu·∫£.\"}\r\n              </div>\r\n            )}\r\n            {messages.map((messages) => (\r\n              <div\r\n                key={messages.id}\r\n                style={{\r\n                  marginBottom: \"12px\",\r\n                  display: \"flex\",\r\n                  justifyContent:\r\n                    messages.sender === \"user\" ? \"flex-end\" : \"flex-start\",\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    background:\r\n                      messages.sender === \"user\" ? \"#E28413\" : \"#e2e8f0\",\r\n                    color: messages.sender === \"user\" ? \"white\" : \"#1e293b\",\r\n                    padding: \"8px 12px\",\r\n                    borderRadius: \"12px\",\r\n                    maxWidth: \"80%\",\r\n                    fontSize: \"14px\",\r\n                    lineHeight: \"1.4\",\r\n                  }}\r\n                  // dangerouslySetInnerHTML l√† c√°ch c·ªßa React ƒë·ªÉ n√≥i v·ªõi tr√¨nh duy·ªát: \"N·ªôi dung c·ªßa bi·∫øn n√†y l√† HTML, h√£y render n√≥ ra thay v√¨ hi·ªÉn th·ªã n√≥ d∆∞·ªõi d·∫°ng vƒÉn b·∫£n.\"\r\n                  dangerouslySetInnerHTML={{ __html: messages.text }}\r\n                ></div>\r\n              </div>\r\n            ))}\r\n            {isLoading && (\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"flex-start\",\r\n                  marginBottom: \"12px\",\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    background: \"#e2e8f0\",\r\n                    color: \"#1e293b\",\r\n                    padding: \"8px 12px\",\r\n                    borderRadius: \"12px\",\r\n                    fontSize: \"14px\",\r\n                  }}\r\n                >\r\n                  ƒêang tr·∫£ l·ªùi...\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Input Area */}\r\n          <div\r\n            style={{\r\n              padding: \"16px\",\r\n              borderTop: \"1px solid #e2e8f0\",\r\n              background: \"white\",\r\n              borderBottomLeftRadius: \"12px\",\r\n              borderBottomRightRadius: \"12px\",\r\n            }}\r\n          >\r\n            <div style={{ display: \"flex\", gap: \"8px\" }}>\r\n              <input\r\n                type=\"text\"\r\n                value={inputMessage}\r\n                onChange={(e) => setInputMessage(e.target.value)}\r\n                onKeyPress={handleKeyPress}\r\n                placeholder={\r\n                  user.role === \"admin\"\r\n                    ? \"Nh·∫≠p c√¢u h·ªèi v·ªÅ qu·∫£n l√Ω b√†i t·∫≠p...\"\r\n                    : \"Nh·∫≠p c√¢u h·ªèi v·ªÅ b√†i h·ªçc...\"\r\n                }\r\n                style={{\r\n                  flex: 1,\r\n                  padding: \"8px 12px\",\r\n                  border: \"1px solid #cbd5e1\",\r\n                  borderRadius: \"20px\",\r\n                  fontSize: \"14px\",\r\n                  outline: \"none\",\r\n                }}\r\n                disabled={isLoading}\r\n              />\r\n              <button\r\n                onClick={handleSend}\r\n                disabled={isLoading || inputMessage.trim() === \"\"}\r\n                style={{\r\n                  background: \"#E28413\",\r\n                  border: \"none\",\r\n                  borderRadius: \"20px\",\r\n                  padding: \"8px 16px\",\r\n                  color: \"white\",\r\n                  cursor:\r\n                    inputMessage.trim() === \"\" || isLoading\r\n                      ? \"not-allowed\"\r\n                      : \"pointer\",\r\n                  opacity: inputMessage.trim() === \"\" || isLoading ? 0.6 : 1,\r\n                }}\r\n              >\r\n                G·ª≠i\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatBot;\r\n","size_bytes":9391},"src/index.css":{"content":"body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n","size_bytes":366},"src/components/QuizPage.js":{"content":"import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\n\nfunction QuizPage({ user }) {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [quiz, setQuiz] = useState(null);\n  const [questions, setQuestions] = useState([]);\n  const [answers, setAnswers] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [score, setScore] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchQuizData();\n  }, [id]);\n\n  const fetchQuizData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log(`üîÑ Fetching quiz data for ID: ${id}`);\n\n      const [quizRes, questionsRes] = await Promise.all([\n        fetch(`/api/quizzes/${id}`),\n        fetch(`/api/quizzes/${id}/questions`),\n      ]);\n\n      if (!quizRes.ok) throw new Error(`Quiz error: ${quizRes.status}`);\n      if (!questionsRes.ok)\n        throw new Error(`Questions error: ${questionsRes.status}`);\n\n      const quizData = await quizRes.json();\n      const questionsData = await questionsRes.json();\n\n      console.log(\"üìä Quiz data:\", quizData);\n      console.log(\"‚ùì Questions data:\", questionsData);\n\n      // Validate questions data\n      const validatedQuestions = questionsData.map((question, index) => {\n        if (!question.options || !Array.isArray(question.options)) {\n          console.warn(\n            `Question ${index} has invalid options:`,\n            question.options\n          );\n          return {\n            ...question,\n            options: [\n              \"L·ªói t·∫£i c√¢u h·ªèi\",\n              \"Vui l√≤ng th·ª≠ l·∫°i\",\n              \"Li√™n h·ªá admin\",\n              \"L·ªói h·ªá th·ªëng\",\n            ],\n          };\n        }\n        return question;\n      });\n\n      setQuiz(quizData);\n      setQuestions(validatedQuestions);\n    } catch (err) {\n      console.error(\"L·ªói t·∫£i d·ªØ li·ªáu:\", err);\n      setError(\"L·ªói t·∫£i b√†i t·∫≠p: \" + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAnswerSelect = (questionId, answer) => {\n    setAnswers((prev) => ({\n      ...prev,\n      [questionId]: answer,\n    }));\n  };\n\n  const calculateScore = () => {\n    let correct = 0;\n    questions.forEach((question) => {\n      if (answers[question.id] === question.correct_answer) {\n        correct++;\n      }\n    });\n\n    // T√≠nh ƒëi·ªÉm theo s·ªë c√¢u h·ªèi th·ª±c t·∫ø\n    const totalQuestions = questions.length;\n    return correct;\n  };\n\n  const handleSubmit = async () => {\n    const calculatedScore = calculateScore();\n    setScore(calculatedScore);\n    setSubmitted(true);\n\n    try {\n      const res = await fetch(\"/api/results\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          userId: user.id,\n          quizId: parseInt(id),\n          score: calculatedScore,\n        }),\n      });\n\n      if (!res.ok) throw new Error(\"L·ªói l∆∞u k·∫øt qu·∫£\");\n    } catch (err) {\n      console.error(\"L·ªói l∆∞u k·∫øt qu·∫£:\", err);\n    }\n  };\n\n  // Hi·ªÉn th·ªã l·ªói\n  if (error) {\n    return (\n      <div\n        style={{\n          border: \"1px solid #ccc\",\n          borderRadius: 20,\n          padding: \"20px\",\n          textAlign: \"center\",\n          background: \"#fff5f5\",\n          color: \"#c53030\",\n        }}\n      >\n        <h2>L·ªói</h2>\n        <p>{error}</p>\n        <button\n          onClick={() => navigate(\"/\")}\n          style={{\n            padding: \"10px 20px\",\n            background: \"#F56416\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"20px\",\n            cursor: \"pointer\",\n            marginTop: \"10px\",\n          }}\n        >\n          Quay v·ªÅ trang ch·ªß\n        </button>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div\n        style={{\n          border: \"1px solid #ccc\",\n          borderRadius: 20,\n          padding: \"20px\",\n          textAlign: \"center\",\n        }}\n      >\n        <h2>ƒêang t·∫£i b√†i t·∫≠p...</h2>\n        <p>Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>\n      </div>\n    );\n  }\n\n  if (!quiz) {\n    return (\n      <div\n        style={{\n          border: \"1px solid #ccc\",\n          borderRadius: 20,\n          padding: \"20px\",\n          textAlign: \"center\",\n        }}\n      >\n        <h2>Kh√¥ng t√¨m th·∫•y b√†i t·∫≠p</h2>\n        <button onClick={() => navigate(\"/\")}>Quay v·ªÅ trang ch·ªß</button>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        border: \"1px solid #ccc\",\n        borderRadius: 20,\n        padding: \"20px 30px\",\n        background: \"white\",\n        maxWidth: \"800px\",\n        margin: \"0 auto\",\n      }}\n    >\n      {/* Header b√†i t·∫≠p */}\n      <div\n        style={{\n          background: \"#f8fafc\",\n          padding: \"20px\",\n          borderRadius: \"15px\",\n          marginBottom: \"20px\",\n          border: \"1px solid #e2e8f0\",\n        }}\n      >\n        <h2 style={{ margin: \"0 0 10px 0\", color: \"#1e293b\" }}>{quiz.title}</h2>\n        <p style={{ margin: 0, color: \"#64748b\", fontSize: \"1rem\" }}>\n          {quiz.description}\n        </p>\n        <p\n          style={{ margin: \"10px 0 0 0\", color: \"#F56416\", fontWeight: \"600\" }}\n        >\n          S·ªë c√¢u h·ªèi: {questions.length}\n        </p>\n      </div>\n\n      {!submitted ? (\n        <div>\n          {/* Th√¥ng tin ti·∫øn ƒë·ªô */}\n          <div\n            style={{\n              background: \"#e2e8f0\",\n              padding: \"15px\",\n              borderRadius: \"10px\",\n              marginBottom: \"20px\",\n              textAlign: \"center\",\n            }}\n          >\n            <p style={{ margin: 0, fontWeight: \"600\", color: \"#4a5568\" }}>\n              ƒê√£ tr·∫£ l·ªùi:{\" \"}\n              <span style={{ color: \"#F56416\" }}>\n                {Object.keys(answers).length}\n              </span>{\" \"}\n              / {questions.length} c√¢u\n            </p>\n          </div>\n\n          {/* Ki·ªÉm tra n·∫øu kh√¥ng c√≥ c√¢u h·ªèi */}\n          {questions.length === 0 ? (\n            <div\n              style={{\n                textAlign: \"center\",\n                padding: \"40px\",\n                background: \"#fff3cd\",\n                borderRadius: \"10px\",\n                border: \"1px solid #ffeaa7\",\n              }}\n            >\n              <h3 style={{ color: \"#856404\" }}>B√†i t·∫≠p ch∆∞a c√≥ c√¢u h·ªèi</h3>\n              <p style={{ color: \"#856404\" }}>\n                Vui l√≤ng li√™n h·ªá admin ƒë·ªÉ th√™m c√¢u h·ªèi\n              </p>\n              <button\n                onClick={() => navigate(\"/\")}\n                style={{\n                  padding: \"10px 20px\",\n                  background: \"#F56416\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: \"20px\",\n                  cursor: \"pointer\",\n                  marginTop: \"10px\",\n                }}\n              >\n                Quay v·ªÅ trang ch·ªß\n              </button>\n            </div>\n          ) : (\n            /* Danh s√°ch c√¢u h·ªèi */\n            <div>\n              {questions.map((question, index) => (\n                <div\n                  key={question.id}\n                  style={{\n                    border: \"1px solid #e2e8f0\",\n                    padding: \"20px\",\n                    marginBottom: \"15px\",\n                    borderRadius: \"12px\",\n                    background: \"#ffffff\",\n                    boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\",\n                  }}\n                >\n                  <h4\n                    style={{\n                      margin: \"0 0 15px 0\",\n                      color: \"#1e293b\",\n                      fontSize: \"1.1rem\",\n                      fontWeight: \"600\",\n                    }}\n                  >\n                    C√¢u {index + 1}: {question.question_text}\n                  </h4>\n\n                  <div>\n                    {question.options.map((option, optIndex) => (\n                      <label\n                        key={optIndex}\n                        style={{\n                          display: \"flex\",\n                          alignItems: \"center\",\n                          padding: \"12px 15px\",\n                          marginBottom: \"8px\",\n                          background:\n                            answers[question.id] === option\n                              ? \"#f0f9ff\"\n                              : \"#f8fafc\",\n                          border:\n                            answers[question.id] === option\n                              ? \"2px solid #F56416\"\n                              : \"1px solid #e2e8f0\",\n                          borderRadius: \"8px\",\n                          cursor: \"pointer\",\n                          transition: \"all 0.2s ease\",\n                        }}\n                        onMouseEnter={(e) => {\n                          if (answers[question.id] !== option) {\n                            e.target.style.background = \"#f1f5f9\";\n                          }\n                        }}\n                        onMouseLeave={(e) => {\n                          if (answers[question.id] !== option) {\n                            e.target.style.background = \"#f8fafc\";\n                          }\n                        }}\n                      >\n                        <input\n                          type=\"radio\"\n                          name={`question-${question.id}`}\n                          value={option}\n                          checked={answers[question.id] === option}\n                          onChange={() =>\n                            handleAnswerSelect(question.id, option)\n                          }\n                          style={{\n                            marginRight: \"12px\",\n                            transform: \"scale(1.2)\",\n                          }}\n                        />\n                        <span style={{ fontSize: \"1rem\" }}>{option}</span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* N√∫t n·ªôp b√†i */}\n          {questions.length > 0 && (\n            <div style={{ textAlign: \"center\", marginTop: \"30px\" }}>\n              <button\n                onClick={handleSubmit}\n                disabled={Object.keys(answers).length !== questions.length}\n                style={{\n                  padding: \"12px 30px\",\n                  fontSize: \"16px\",\n                  cursor:\n                    Object.keys(answers).length === questions.length\n                      ? \"pointer\"\n                      : \"not-allowed\",\n                  backgroundColor:\n                    Object.keys(answers).length === questions.length\n                      ? \"#F56416\"\n                      : \"#cbd5e0\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: \"25px\",\n                  fontWeight: \"600\",\n                  transition: \"all 0.3s ease\",\n                  minWidth: \"150px\",\n                }}\n                onMouseEnter={(e) => {\n                  if (Object.keys(answers).length === questions.length) {\n                    e.target.style.transform = \"translateY(-2px)\";\n                    e.target.style.boxShadow =\n                      \"0 4px 8px rgba(245, 100, 22, 0.3)\";\n                  }\n                }}\n                onMouseLeave={(e) => {\n                  if (Object.keys(answers).length === questions.length) {\n                    e.target.style.transform = \"translateY(0)\";\n                    e.target.style.boxShadow = \"none\";\n                  }\n                }}\n              >\n                {Object.keys(answers).length === questions.length\n                  ? \"üöÄ N·ªôp B√†i\"\n                  : `C√≤n ${\n                      questions.length - Object.keys(answers).length\n                    } c√¢u ch∆∞a tr·∫£ l·ªùi`}\n              </button>\n            </div>\n          )}\n        </div>\n      ) : (\n        /* K·∫øt qu·∫£ sau khi n·ªôp b√†i */\n        <div>\n          <div\n            style={{\n              background: score >= questions.length / 2 ? \"#d1fae5\" : \"#fee2e2\",\n              padding: \"20px\",\n              borderRadius: \"15px\",\n              marginBottom: \"20px\",\n              textAlign: \"center\",\n              border: `2px solid ${\n                score >= questions.length / 2 ? \"#10b981\" : \"#ef4444\"\n              }`,\n            }}\n          >\n            <h3\n              style={{\n                color: score >= questions.length / 2 ? \"#065f46\" : \"#7f1d1d\",\n                margin: \"0 0 10px 0\",\n              }}\n            >\n              {score >= questions.length / 2\n                ? \"üéâ Ch√∫c m·ª´ng!\"\n                : \"üí™ C·ªë g·∫Øng h∆°n nh√©!\"}\n            </h3>\n            <p\n              style={{\n                fontSize: \"1.5rem\",\n                fontWeight: \"700\",\n                color: score >= questions.length / 2 ? \"#059669\" : \"#dc2626\",\n                margin: 0,\n              }}\n            >\n              K·∫øt qu·∫£: {score}/{questions.length} ƒëi·ªÉm\n            </p>\n          </div>\n\n          {/* Chi ti·∫øt t·ª´ng c√¢u h·ªèi */}\n          <div>\n            {questions.map((question, index) => {\n              const userAnswer = answers[question.id];\n              const isCorrect = userAnswer === question.correct_answer;\n\n              return (\n                <div\n                  key={question.id}\n                  style={{\n                    border: `2px solid ${isCorrect ? \"#10b981\" : \"#ef4444\"}`,\n                    padding: \"20px\",\n                    marginBottom: \"15px\",\n                    borderRadius: \"12px\",\n                    background: isCorrect ? \"#f0fdf4\" : \"#fef2f2\",\n                  }}\n                >\n                  <h4\n                    style={{\n                      margin: \"0 0 15px 0\",\n                      color: \"#1e293b\",\n                      fontSize: \"1.1rem\",\n                    }}\n                  >\n                    C√¢u {index + 1}: {question.question_text}\n                  </h4>\n\n                  <div style={{ marginBottom: \"10px\" }}>\n                    <p style={{ margin: \"5px 0\" }}>\n                      <strong style={{ color: \"#4a5568\" }}>\n                        ƒê√°p √°n c·ªßa b·∫°n:\n                      </strong>\n                      <span\n                        style={{\n                          color: isCorrect ? \"#059669\" : \"#dc2626\",\n                          fontWeight: \"600\",\n                          marginLeft: \"8px\",\n                        }}\n                      >\n                        {userAnswer}\n                      </span>\n                    </p>\n\n                    <p style={{ margin: \"5px 0\" }}>\n                      <strong style={{ color: \"#4a5568\" }}>ƒê√°p √°n ƒë√∫ng:</strong>\n                      <span\n                        style={{\n                          color: \"#059669\",\n                          fontWeight: \"600\",\n                          marginLeft: \"8px\",\n                        }}\n                      >\n                        {question.correct_answer}\n                      </span>\n                    </p>\n                  </div>\n\n                  <p\n                    style={{\n                      color: isCorrect ? \"#059669\" : \"#dc2626\",\n                      fontWeight: \"bold\",\n                      fontSize: \"1rem\",\n                      margin: \"10px 0 0 0\",\n                    }}\n                  >\n                    {isCorrect ? \"‚úÖ ƒê√∫ng\" : \"‚ùå Sai\"}\n                  </p>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* N√∫t quay v·ªÅ */}\n          <div style={{ textAlign: \"center\", marginTop: \"30px\" }}>\n            <button\n              onClick={() => navigate(\"/\")}\n              style={{\n                padding: \"12px 30px\",\n                fontSize: \"16px\",\n                cursor: \"pointer\",\n                backgroundColor: \"#F56416\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: \"25px\",\n                fontWeight: \"600\",\n                transition: \"all 0.3s ease\",\n              }}\n              onMouseEnter={(e) => {\n                e.target.style.transform = \"translateY(-2px)\";\n                e.target.style.boxShadow = \"0 4px 8px rgba(245, 100, 22, 0.3)\";\n              }}\n              onMouseLeave={(e) => {\n                e.target.style.transform = \"translateY(0)\";\n                e.target.style.boxShadow = \"none\";\n              }}\n            >\n              ‚Üê Quay v·ªÅ trang ch·ªß\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default QuizPage;\n","size_bytes":16756},"src/App.js":{"content":"import React, { useState, useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n  Link,\n  useLocation,\n} from \"react-router-dom\";\nimport LoginPage from \"./components/LoginPage\";\nimport AdminPage from \"./components/AdminPage\";\nimport UserHome from \"./components/UserHome\";\nimport QuizPage from \"./components/QuizPage\";\nimport ResultsPage from \"./components/ResultsPage\";\nimport Chatbot from \"./components/ChatBot\";\nimport RegisterPage from \"./components/RegisterPage\";\n\n// Sidebar Component\nfunction Sidebar({ user, logout, currentPath }) {\n  const menuItems = [\n    { path: \"/\", label: \"Trang ch·ªß\", roles: [\"user\", \"admin\"] },\n    { path: \"/admin\", label: \"Qu·∫£n l√Ω\", roles: [\"admin\"] },\n    { path: \"/results\", label: \"K·∫øt qu·∫£\", roles: [\"user\", \"admin\"] },\n  ];\n\n  const filteredItems = menuItems.filter((item) =>\n    item.roles.includes(user.role)\n  );\n\n  return (\n    <div\n      style={{\n        width: \"250px\",\n        background: \"#E28413\",\n        color: \"black\",\n        height: \"100vh\",\n        padding: \"20px 0\",\n        position: \"fixed\",\n        left: 0,\n        top: 0,\n        boxShadow: \"2px 0 10px rgba(0,0,0,0.1)\",\n      }}\n    >\n      {/* Logo */}\n      <div\n        style={{\n          padding: \"0 20px 20px\",\n          borderBottom: \"1px solid rgba(255,255,255,0.2)\",\n          marginBottom: \"20px\",\n        }}\n      >\n        <h2\n          style={{\n            margin: 0,\n            fontSize: \"1.5rem\",\n            fontWeight: \"600\",\n          }}\n        >\n          Assignment App\n        </h2>\n      </div>\n\n      {/* Menu Items */}\n      <nav>\n        {filteredItems.map((item) => (\n          <Link\n            key={item.path}\n            to={item.path}\n            style={{\n              display: \"block\",\n              padding: \"12px 20px\",\n              color: currentPath === item.path ? \"white\" : \"black\",\n              textDecoration: \"none\",\n              fontSize: \"0.95rem\",\n              fontWeight: currentPath === item.path ? \"600\" : \"400\",\n              background: currentPath === item.path ? \"#DD4B1A\" : \"transparent\",\n              borderLeft:\n                currentPath === item.path ? \"2px solid white\" : \"none\",\n              transition: \"all 0.3s ease\",\n              margin: \"5px 10px\",\n              borderRadius: \"8px\",\n            }}\n            onMouseEnter={(e) => {\n              e.target.style.background = \"rgba(255,255,255,0.1)\";\n            }}\n            onMouseLeave={(e) => {\n              if (currentPath !== item.path) {\n                e.target.style.background = \"transparent\";\n              }\n            }}\n          >\n            {item.label}\n          </Link>\n        ))}\n      </nav>\n\n      {/* LogOut */}\n      <div\n        style={{\n          position: \"absolute\",\n          bottom: \"100px\",\n          left: \"0\",\n          right: \"0\",\n          padding: \"0 20px\",\n        }}\n      >\n        <button\n          onClick={logout}\n          style={{\n            padding: \"8px 16px\",\n            cursor: \"pointer\",\n            color: \"black\",\n            background: \"transparent\",\n            border: \"none\",\n            fontWeight: \"600\",\n            fontSize: 18,\n            transition: \"all 0.3s ease\",\n          }}\n          onMouseEnter={(e) => {\n            e.target.style.background = \"#DD4B1A\";\n            e.target.style.border = \"none\";\n            e.target.style.color = \"white\";\n            e.target.style.borderRadius = \"20px\";\n            e.target.style.transform = \"translateY(-1px)\";\n          }}\n          onMouseLeave={(e) => {\n            e.target.style.background = \"transparent\";\n            e.target.style.color = \"black\";\n            e.target.style.transform = \"translateY(0)\";\n          }}\n        >\n          ƒêƒÉng xu·∫•t\n        </button>\n      </div>\n    </div>\n  );\n}\n\n// Main Layout Component\nfunction MainLayout({ user, logout, children }) {\n  const location = useLocation();\n\n  return (\n    <div style={{ display: \"flex\" }}>\n      {/* Sidebar */}\n      <Sidebar user={user} logout={logout} currentPath={location.pathname} />\n\n      {/* Main Content */}\n      <div\n        style={{\n          marginLeft: \"250px\",\n          flex: 1,\n          minHeight: \"100vh\",\n          background: \"#f8fafc\",\n        }}\n      >\n        {/* Header */}\n        <header\n          style={{\n            background: \"white\",\n            padding: \"1rem 2rem\",\n            borderBottom: \"1px solid #e2e8f0\",\n            boxShadow: \"0 1px 3px rgba(0,0,0,0.1)\",\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}\n        >\n          <div>\n            <h1\n              style={{\n                margin: 0,\n                fontSize: 24,\n                color: \"#1e293b\",\n              }}\n            >\n              {location.pathname === \"/\" && \"Dashboard\"}\n              {location.pathname === \"/admin\" && \"Qu·∫£n L√Ω B√†i T·∫≠p\"}\n              {location.pathname === \"/results\" && \"K·∫øt Qu·∫£ H·ªçc T·∫≠p\"}\n              {location.pathname.startsWith(\"/quiz/\") && \"L√†m B√†i T·∫≠p\"}\n            </h1>\n          </div>\n\n          <div style={{ display: \"flex\", alignItems: \"center\", gap: \"1rem\" }}>\n            <div style={{ textAlign: \"right\" }}>\n              <div style={{ fontWeight: \"600\", color: \"#1e293b\" }}>\n                {user.name}\n              </div>\n              <div\n                style={{\n                  fontSize: \"0.8rem\",\n                  color: \"#64748b\",\n                  background: user.role === \"admin\" ? \"#ffb703\" : \"#667eea\",\n                  padding: \"2px 8px\",\n                  borderRadius: \"12px\",\n                  marginTop: \"2px\",\n                  textAlign: \"center\",\n                }}\n              >\n                {user.role === \"admin\" ? \"Admin\" : \"User\"}\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {/* Page Content */}\n        <main style={{ padding: \"2rem\" }}>{children}</main>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const savedUser = localStorage.getItem(\"user\");\n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n  }, []);\n\n  const logout = () => {\n    localStorage.removeItem(\"user\");\n    setUser(null);\n  };\n\n  return (\n    <Router>\n      <div>\n        {user ? (\n          <>\n            <MainLayout user={user} logout={logout}>\n              <Routes>\n                <Route path=\"/admin\" element={<AdminPage />} />\n                <Route path=\"/quiz/:id\" element={<QuizPage user={user} />} />\n                <Route path=\"/results\" element={<ResultsPage user={user} />} />\n                <Route path=\"/\" element={<UserHome user={user} />} />\n                <Route path=\"*\" element={<Navigate to=\"/\" />} />\n              </Routes>\n            </MainLayout>\n            <Chatbot user={user} />\n          </>\n        ) : (\n          <Routes>\n            <Route path=\"/login\" element={<LoginPage setUser={setUser} />} />\n            <Route\n              path=\"/register\"\n              element={<RegisterPage setUser={setUser} />}\n            />\n            <Route path=\"*\" element={<Navigate to=\"/login\" />} />\n          </Routes>\n        )}\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","size_bytes":7275},"src/index.js":{"content":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","size_bytes":254},"backend/server.js":{"content":"import express from \"express\";\nimport cors from \"cors\";\nimport sqlite3 from \"sqlite3\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst app = express();\n\napp.use(\n  cors({\n    origin: \"*\",\n    methods: [\"GET\", \"POST\", \"PUT\", \"DELETE\"],\n    credentials: false,\n  })\n);\n\napp.use(express.json());\napp.use(express.static(path.join(__dirname, \"public\")));\n\n// K·∫øt n·ªëi DB\nconst db = new sqlite3.Database(\"./task_app.db\", (err) => {\n  if (err) console.error(\"‚ùå L·ªói k·∫øt n·ªëi DB:\", err);\n  else console.log(\"‚úÖ ƒê√£ k·∫øt n·ªëi SQLite!\");\n});\n\n// T·∫°o b·∫£ng\ndb.run(`\n  CREATE TABLE IF NOT EXISTS users (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    name TEXT,\n    email TEXT UNIQUE,\n    password TEXT,\n    role TEXT CHECK(role IN ('admin', 'user')) DEFAULT 'user',\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n  )\n`);\n\ndb.run(`\n  CREATE TABLE IF NOT EXISTS quizzes (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    title TEXT,\n    description TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n  )\n`);\n\ndb.run(`\n  CREATE TABLE IF NOT EXISTS questions (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    quiz_id INTEGER,\n    question_text TEXT,\n    options TEXT,\n    correct_answer TEXT,\n    FOREIGN KEY (quiz_id) REFERENCES quizzes(id)\n  )\n`);\n\ndb.run(`\n  CREATE TABLE IF NOT EXISTS results (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    user_id INTEGER,\n    quiz_id INTEGER,\n    score INTEGER,\n    completed_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (user_id) REFERENCES users(id),\n    FOREIGN KEY (quiz_id) REFERENCES quizzes(id)\n  )\n`);\n\n// T·∫°o user m·∫∑c ƒë·ªãnh\n// db.get(\"SELECT * FROM users WHERE email = 'admin@test.com'\", (err, row) => {\n//   if (!row) {\n//     db.run(\n//       \"INSERT INTO users (name, email, password, role) VALUES (?, ?, ?, ?)\",\n//       [\"Admin\", \"admin@test.com\", \"123456\", \"admin\"]\n//     );\n//     console.log(\"‚úÖ ƒê√£ t·∫°o admin m·∫∑c ƒë·ªãnh: admin@test.com / 123456\");\n//   }\n// });\n\n// db.get(\"SELECT * FROM users WHERE email = 'user@test.com'\", (err, row) => {\n//   if (!row) {\n//     db.run(\n//       \"INSERT INTO users (name, email, password, role) VALUES (?, ?, ?, ?)\",\n//       [\"User Test\", \"user@test.com\", \"123456\", \"user\"]\n//     );\n//     console.log(\"‚úÖ ƒê√£ t·∫°o user m·∫∑c ƒë·ªãnh: user@test.com / 123456\");\n//   }\n// });\n\n\n// API ƒëƒÉng k√Ω user m·ªõi\napp.post(\"/api/register\", (req, res) => {\n  const { name, email, password, role = \"user\" } = req.body;\n\n  console.log(\"üìù Register attempt:\", { name, email, role });\n\n  if (!name || !email || !password) {\n    return res.status(400).json({ error: \"Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.\" });\n  }\n\n  // Ki·ªÉm tra email ƒë√£ t·ªìn t·∫°i ch∆∞a\n  db.get(\"SELECT * FROM users WHERE email = ?\", [email], (err, existingUser) => {\n    if (err) {\n      console.error(\"Database error:\", err);\n      return res.status(500).json({ error: \"L·ªói server.\" });\n    }\n\n    if (existingUser) {\n      return res.status(400).json({ error: \"Email ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng.\" });\n    }\n\n    // T·∫°o user m·ªõi\n    db.run(\n      \"INSERT INTO users (name, email, password, role) VALUES (?, ?, ?, ?)\",\n      [name, email, password, role],\n      function (err) {\n        if (err) {\n          console.error(\"Error creating user:\", err);\n          return res.status(500).json({ error: \"L·ªói t·∫°o t√†i kho·∫£n.\" });\n        }\n\n        console.log(\"‚úÖ User created successfully:\", email);\n        res.json({\n          id: this.lastID,\n          name,\n          email,\n          role,\n          message: \"ƒêƒÉng k√Ω th√†nh c√¥ng!\"\n        });\n      }\n    );\n  });\n});\n\n// API test\napp.get(\"/\", (req, res) => {\n  res.json({\n    message: \"Backend ƒëang ch·∫°y!\",\n    timestamp: new Date().toISOString(),\n    endpoints: [\n      \"GET /api/quizzes\",\n      \"POST /api/login\",\n      \"GET /api/my-results/:userId\",\n      \"POST /api/results\",\n    ],\n  });\n});\n\n// API ƒëƒÉng nh·∫≠p\napp.post(\"/api/login\", (req, res) => {\n  const { email, password } = req.body;\n\n  console.log(\"üìß Login attempt:\", email);\n\n  if (!email || !password) {\n    return res.status(400).json({ error: \"Vui l√≤ng nh·∫≠p email v√† m·∫≠t kh·∫©u.\" });\n  }\n\n  db.get(\"SELECT * FROM users WHERE email = ?\", [email], (err, user) => {\n    if (err) {\n      console.error(\"Database error:\", err);\n      return res.status(500).json({ error: \"L·ªói server.\" });\n    }\n\n    if (!user) {\n      console.log(\"User not found:\", email);\n      return res.status(401).json({ error: \"Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng.\" });\n    }\n\n    if (user.password !== password) {\n      console.log(\"Wrong password for:\", email);\n      return res.status(401).json({ error: \"Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng.\" });\n    }\n\n    console.log(\"‚úÖ Login successful:\", email);\n    res.json({\n      id: user.id,\n      name: user.name,\n      email: user.email,\n      role: user.role,\n    });\n  });\n});\n\n// API l·∫•y danh s√°ch quiz\napp.get(\"/api/quizzes\", (req, res) => {\n  db.all(\n    `SELECT \n    q.*,\n    (SELECT COUNT(DISTINCT user_id) FROM results WHERE quiz_id = q.id) as completed_count\n    FROM quizzes q\n    ORDER BY q.created_at DESC`,\n    (err, rows) => {\n      if (err) {\n        console.error(\"Error fetching quizzes:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n      console.log(`‚úÖ Quizzes fetched: ${rows.length} quizzes`);\n      // Debug t·ª´ng quiz\n      rows.forEach((quiz) => {\n        console.log(\n          `Quiz ${quiz.id}: \"${quiz.title}\" - ${quiz.completed_count} students`\n        );\n      });\n      res.json(rows);\n    }\n  );\n});\n\n// API l·∫•y chi ti·∫øt 1 quiz\napp.get(\"/api/quizzes/:id\", (req, res) => {\n  const { id } = req.params;\n  db.get(\"SELECT * FROM quizzes WHERE id = ?\", [id], (err, row) => {\n    if (err) {\n      console.error(\"Error fetching quiz:\", err);\n      return res.status(500).json({ error: err.message });\n    }\n    if (!row) return res.status(404).json({ error: \"Quiz kh√¥ng t·ªìn t·∫°i\" });\n    res.json(row);\n  });\n});\n\n// API l·∫•y c√¢u h·ªèi c·ªßa 1 quiz\napp.get(\"/api/quizzes/:id/questions\", (req, res) => {\n  const { id } = req.params;\n  console.log(`üìù Fetching questions for quiz ${id}...`);\n\n  db.all(\"SELECT * FROM questions WHERE quiz_id = ?\", [id], (err, rows) => {\n    if (err) {\n      console.error(\"Error fetching questions:\", err);\n      return res.status(500).json({ error: err.message });\n    }\n\n    console.log(`‚úÖ Found ${rows.length} questions for quiz ${id}`);\n\n    // Parse options t·ª´ JSON string th√†nh array\n    const questionsWithParsedOptions = rows.map((question) => ({\n      ...question,\n      options: JSON.parse(question.options),\n    }));\n\n    res.json(questionsWithParsedOptions);\n  });\n});\n\n// Th√™m quiz m·ªõi\napp.post(\"/api/quizzes\", (req, res) => {\n  const { title, description } = req.body;\n  if (!title || !description) {\n    return res.status(400).json({ error: \"Thi·∫øu th√¥ng tin quiz!\" });\n  }\n\n  db.run(\n    \"INSERT INTO quizzes (title, description) VALUES (?, ?)\",\n    [title, description],\n    function (err) {\n      if (err) {\n        console.error(\"Error adding quiz:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n      res.json({ id: this.lastID, title, description });\n    }\n  );\n});\n\n// API th√™m c√¢u h·ªèi v√†o quiz\napp.post(\"/api/quizzes/:id/questions\", (req, res) => {\n  const { id } = req.params;\n  const { question_text, options, correct_answer } = req.body;\n\n  console.log(\"‚ûï Adding question to quiz:\", id);\n  console.log(\"Question data:\", { question_text, options, correct_answer });\n\n  if (!question_text || !options || !correct_answer) {\n    return res.status(400).json({ error: \"Thi·∫øu th√¥ng tin c√¢u h·ªèi!\" });\n  }\n\n  // Validate options l√† array\n  if (!Array.isArray(options) || options.length !== 4) {\n    return res.status(400).json({ error: \"Options ph·∫£i l√† m·∫£ng 4 ph·∫ßn t·ª≠!\" });\n  }\n\n  db.run(\n    \"INSERT INTO questions (quiz_id, question_text, options, correct_answer) VALUES (?, ?, ?, ?)\",\n    [id, question_text, JSON.stringify(options), correct_answer],\n    function (err) {\n      if (err) {\n        console.error(\"Error adding question:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n\n      console.log(\"‚úÖ Question added successfully, ID:\", this.lastID);\n      res.json({\n        id: this.lastID,\n        quiz_id: parseInt(id),\n        question_text,\n        options: options,\n        correct_answer,\n      });\n    }\n  );\n});\n\n// API x√≥a c√¢u h·ªèi\napp.delete(\"/api/questions/:id\", (req, res) => {\n  const { id } = req.params;\n  console.log(`üóëÔ∏è Deleting question ${id}...`);\n\n  db.run(\"DELETE FROM questions WHERE id = ?\", [id], function (err) {\n    if (err) {\n      console.error(\"Error deleting question:\", err);\n      return res.status(500).json({ error: err.message });\n    }\n\n    if (this.changes === 0) {\n      return res.status(404).json({ error: \"C√¢u h·ªèi kh√¥ng t·ªìn t·∫°i\" });\n    }\n\n    console.log(\"‚úÖ Question deleted successfully\");\n    res.json({ message: \"X√≥a c√¢u h·ªèi th√†nh c√¥ng!\" });\n  });\n});\n\n// API l·∫•y k·∫øt qu·∫£ c·ªßa 1 user\napp.get(\"/api/my-results/:userId\", (req, res) => {\n  const { userId } = req.params;\n  console.log(\"Fetching results for user:\", userId);\n\n  db.all(\"SELECT * FROM results WHERE user_id = ?\", [userId], (err, rows) => {\n    if (err) {\n      console.error(\"Error fetching results:\", err);\n      return res.status(500).json({ error: err.message });\n    }\n    res.json(rows);\n  });\n});\n\n// API l·∫•y t·∫•t c·∫£ k·∫øt qu·∫£ c·ªßa t·∫•t c·∫£ users (cho admin)\napp.get(\"/api/all-results\", (req, res) => {\n  console.log(\"üìä Fetching all results for admin...\");\n\n  db.all(\n    `\n    SELECT \n      r.*,\n      u.name as user_name,\n      u.email as user_email,\n      q.title as quiz_title\n    FROM results r\n    JOIN users u ON r.user_id = u.id\n    JOIN quizzes q ON r.quiz_id = q.id\n    ORDER BY u.name, r.completed_at DESC\n  `,\n    (err, rows) => {\n      if (err) {\n        console.error(\"Error fetching all results:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n\n      console.log(`‚úÖ All results fetched: ${rows.length} records`);\n      res.json(rows);\n    }\n  );\n});\n\n// API c·∫≠p nh·∫≠t ƒëi·ªÉm s·ªë\napp.put(\"/api/results/:id\", (req, res) => {\n  const { id } = req.params;\n  const { score } = req.body;\n\n  console.log(\"üìù Updating score for result:\", id, \"New score:\", score);\n\n  if (score === undefined || score === null) {\n    return res.status(400).json({ error: \"Thi·∫øu th√¥ng tin ƒëi·ªÉm!\" });\n  }\n\n  const scoreValue = parseInt(score);\n  if (isNaN(scoreValue) || scoreValue < 0) {\n    return res.status(400).json({ error: \"ƒêi·ªÉm ph·∫£i l√† s·ªë d∆∞∆°ng!\" });\n  }\n\n  db.run(\n    \"UPDATE results SET score = ?, completed_at = CURRENT_TIMESTAMP WHERE id = ?\",\n    [scoreValue, id],\n    function (err) {\n      if (err) {\n        console.error(\"Error updating score:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n\n      if (this.changes === 0) {\n        return res.status(404).json({ error: \"K·∫øt qu·∫£ kh√¥ng t·ªìn t·∫°i\" });\n      }\n\n      console.log(\"‚úÖ Score updated successfully\");\n      res.json({ message: \"C·∫≠p nh·∫≠t ƒëi·ªÉm th√†nh c√¥ng!\", id: parseInt(id) });\n    }\n  );\n});\n\n// API l·∫•y h·ªçc sinh ƒë√£ l√†m b√†i\napp.get(\"/api/quizzes/:id/results\", (req, res) => {\n  const { id } = req.params;\n  console.log(`üë• Fetching students for quiz ${id}...`);\n\n  db.all(\n    `\n    SELECT u.name, r.score, r.completed_at \n    FROM results r\n    JOIN users u ON r.user_id = u.id\n    WHERE r.quiz_id = ?\n    ORDER BY r.completed_at DESC\n  `,\n    [id],\n    (err, rows) => {\n      if (err) {\n        console.error(\"Error fetching quiz results:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n      console.log(`‚úÖ Found ${rows.length} students for quiz ${id}:`, rows);\n      res.json(rows);\n    }\n  );\n});\n\n// API n·ªôp b√†i\napp.post(\"/api/results\", (req, res) => {\n  const { userId, quizId, score } = req.body;\n  console.log(\"Submitting result:\", { userId, quizId, score });\n\n  // Ki·ªÉm tra xem user ƒë√£ l√†m quiz n√†y ch∆∞a\n  db.get(\n    \"SELECT * FROM results WHERE user_id = ? AND quiz_id = ?\",\n    [userId, quizId],\n    (err, existing) => {\n      if (err) {\n        console.error(\"Error checking existing result:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n\n      if (existing) {\n        // N·∫øu ƒë√£ l√†m th√¨ c·∫≠p nh·∫≠t ƒëi·ªÉm\n        db.run(\n          \"UPDATE results SET score = ?, completed_at = CURRENT_TIMESTAMP WHERE user_id = ? AND quiz_id = ?\",\n          [score, userId, quizId],\n          function (err) {\n            if (err) {\n              console.error(\"Error updating result:\", err);\n              return res.status(500).json({ error: err.message });\n            }\n            res.json({ message: \"C·∫≠p nh·∫≠t ƒëi·ªÉm th√†nh c√¥ng!\", id: existing.id });\n          }\n        );\n      } else {\n        // N·∫øu ch∆∞a l√†m th√¨ th√™m m·ªõi\n        db.run(\n          \"INSERT INTO results (user_id, quiz_id, score) VALUES (?, ?, ?)\",\n          [userId, quizId, score],\n          function (err) {\n            if (err) {\n              console.error(\"Error saving result:\", err);\n              return res.status(500).json({ error: err.message });\n            }\n            res.json({ message: \"L∆∞u k·∫øt qu·∫£ th√†nh c√¥ng!\", id: this.lastID });\n          }\n        );\n      }\n    }\n  );\n});\n\n// API x√≥a quiz\napp.delete(\"/api/quizzes/:id\", (req, res) => {\n  const { id } = req.params;\n  console.log(`üóëÔ∏è Deleting quiz ${id}...`);\n\n  db.serialize(() => {\n    db.run(\"DELETE FROM questions WHERE quiz_id = ?\", [id]);\n    db.run(\"DELETE FROM results WHERE quiz_id = ?\", [id]);\n    db.run(\"DELETE FROM quizzes WHERE id = ?\", [id], function (err) {\n      if (err) {\n        console.error(\"Error deleting quiz:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n\n      console.log(\"‚úÖ Quiz deleted successfully\");\n      res.json({ message: \"X√≥a quiz th√†nh c√¥ng!\" });\n    });\n  });\n});\n\n// API c·∫≠p nh·∫≠t quiz\napp.put(\"/api/quizzes/:id\", (req, res) => {\n  const { id } = req.params;\n  const { title, description } = req.body;\n\n  console.log(\"Updating quiz:\", id, title, description);\n\n  if (!title || !description) {\n    return res.status(400).json({ error: \"Thi·∫øu th√¥ng tin quiz!\" });\n  }\n\n  db.run(\n    \"UPDATE quizzes SET title = ?, description = ? WHERE id = ?\",\n    [title, description, id],\n    function (err) {\n      if (err) {\n        console.error(\"Error updating quiz:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n\n      if (this.changes === 0) {\n        return res.status(404).json({ error: \"Quiz kh√¥ng t·ªìn t·∫°i\" });\n      }\n\n      console.log(\"Quiz updated successfully\");\n      res.json({ message: \"C·∫≠p nh·∫≠t quiz th√†nh c√¥ng!\", id: parseInt(id) });\n    }\n  );\n});\n\n// API c·∫≠p nh·∫≠t c√¢u h·ªèi\napp.put(\"/api/questions/:id\", (req, res) => {\n  const { id } = req.params;\n  const { question_text, options, correct_answer } = req.body;\n\n  console.log(\"Updating question:\", id, {\n    question_text,\n    options,\n    correct_answer,\n  });\n\n  if (!question_text || !options || !correct_answer) {\n    return res.status(400).json({ error: \"Thi·∫øu th√¥ng tin c√¢u h·ªèi!\" });\n  }\n\n  // Validate options l√† array\n  if (!Array.isArray(options) || options.length !== 4) {\n    return res.status(400).json({ error: \"Options ph·∫£i l√† m·∫£ng 4 ph·∫ßn t·ª≠!\" });\n  }\n\n  db.run(\n    \"UPDATE questions SET question_text = ?, options = ?, correct_answer = ? WHERE id = ?\",\n    [question_text, JSON.stringify(options), correct_answer, id],\n    function (err) {\n      if (err) {\n        console.error(\"Error updating question:\", err);\n        return res.status(500).json({ error: err.message });\n      }\n\n      if (this.changes === 0) {\n        return res.status(404).json({ error: \"C√¢u h·ªèi kh√¥ng t·ªìn t·∫°i\" });\n      }\n\n      console.log(\"‚úÖ Question updated successfully\");\n      res.json({ message: \"C·∫≠p nh·∫≠t c√¢u h·ªèi th√†nh c√¥ng!\", id: parseInt(id) });\n    }\n  );\n});\n\n// Kh·ªüi ƒë·ªông server\nconst PORT = 8000;\napp.listen(PORT, \"localhost\", () => {\n  console.log(`üöÄ Server ch·∫°y t·∫°i http://localhost:${PORT}`);\n  console.log(`üåê C√≥ th·ªÉ truy c·∫≠p t·ª´: http://127.0.0.1:${PORT}`);\n  console.log(\"üìß T√†i kho·∫£n m·∫∑c ƒë·ªãnh:\");\n  console.log(\"   Admin: admin@test.com / 123456\");\n  console.log(\"   User:  user@test.com / 123456\");\n  console.log(\"\\n‚úÖ T·∫•t c·∫£ API endpoints ƒë√£ s·∫µn s√†ng!\");\n});\n","size_bytes":16684},"src/components/ResultsPage.js":{"content":"import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction ResultsPage({ user }) {\n  const [results, setResults] = useState([]);\n  const [allResults, setAllResults] = useState([]);\n  const [quizzes, setQuizzes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [editingScore, setEditingScore] = useState(null);\n  const [newScore, setNewScore] = useState(\"\");\n\n  useEffect(() => {\n    fetchData();\n  }, [user]);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      if (user.role === \"admin\") {\n        await Promise.all([fetchAllResults(), fetchQuizzes()]);\n      } else {\n        await Promise.all([fetchMyResults(), fetchQuizzes()]);\n      }\n    } catch (err) {\n      setError(\"L·ªói t·∫£i d·ªØ li·ªáu: \" + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMyResults = async () => {\n    try {\n      const res = await fetch(`/api/my-results/${user.id}`);\n      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n      const data = await res.json();\n      setResults(data);\n    } catch (err) {\n      console.error(\"L·ªói t·∫£i k·∫øt qu·∫£:\", err);\n      setError(\"L·ªói t·∫£i k·∫øt qu·∫£ c√° nh√¢n\");\n    }\n  };\n\n  const fetchAllResults = async () => {\n    try {\n      console.log(\"üîÑ ƒêang fetch all-results...\");\n      const res = await fetch(\"/api/all-results\");\n      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n      const data = await res.json();\n      console.log(\"üìä D·ªØ li·ªáu all-results:\", data);\n      setAllResults(data);\n    } catch (err) {\n      console.error(\"L·ªói t·∫£i t·∫•t c·∫£ k·∫øt qu·∫£:\", err);\n      setError(\"L·ªói t·∫£i k·∫øt qu·∫£ h·ªçc sinh\");\n    }\n  };\n\n  const fetchQuizzes = async () => {\n    try {\n      const res = await fetch(\"/api/quizzes\");\n      if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n      const data = await res.json();\n      setQuizzes(data);\n    } catch (err) {\n      console.error(\"L·ªói t·∫£i quizzes:\", err);\n    }\n  };\n\n  const getQuizTitle = (quizId) => {\n    const quiz = quizzes.find((q) => q.id === quizId);\n    return quiz ? quiz.title : \"B√†i t·∫≠p kh√¥ng x√°c ƒë·ªãnh\";\n  };\n\n  // T√≠nh ƒëi·ªÉm v√† l·∫•y ƒëi·ªÉm c·ªßa users\n  const getUserStats = () => {\n    if (!Array.isArray(allResults) || allResults.length === 0) {\n      console.log(\"‚ÑπÔ∏è allResults ƒëang tr·ªëng ho·∫∑c kh√¥ng ph·∫£i m·∫£ng\");\n      return {};\n    }\n\n    const userStats = {};\n\n    allResults.forEach((result) => {\n      if (!result || typeof result !== \"object\") return;\n\n      const userId = result.user_id;\n      const userName = result.user_name || \"Kh√¥ng x√°c ƒë·ªãnh\";\n      const userEmail = result.user_email || \"Kh√¥ng x√°c ƒë·ªãnh\";\n      const score = Number(result.score) || 0;\n      const quizId = result.quiz_id;\n\n      if (!userId) return;\n\n      if (!userStats[userId]) {\n        userStats[userId] = {\n          user_name: userName,\n          user_email: userEmail,\n          total_score: 0,\n          quiz_count: 0,\n          results: [],\n        };\n      }\n\n      userStats[userId].total_score += score;\n      userStats[userId].quiz_count += 1;\n      userStats[userId].results.push({\n        ...result,\n        quiz_id: quizId,\n        score: score,\n      });\n    });\n\n    // T√≠nh ƒëi·ªÉm trung b√¨nh\n    Object.keys(userStats).forEach((userId) => {\n      const stats = userStats[userId];\n      stats.average_score =\n        stats.quiz_count > 0\n          ? (stats.total_score / stats.quiz_count).toFixed(1)\n          : 0;\n    });\n\n    return userStats;\n  };\n\n  // S·ª≠a ƒëi·ªÉm\n  const startEditScore = (result) => {\n    setEditingScore(result);\n    setNewScore(result.score.toString());\n  };\n\n  const cancelEditScore = () => {\n    setEditingScore(null);\n    setNewScore(\"\");\n  };\n\n  const handleUpdateScore = async () => {\n    if (!editingScore || !newScore) return;\n\n    const scoreValue = parseInt(newScore);\n    if (isNaN(scoreValue) || scoreValue < 0) {\n      alert(\"ƒêi·ªÉm ph·∫£i l√† s·ªë d∆∞∆°ng!\");\n      return;\n    }\n\n    try {\n      const res = await fetch(`/api/results/${editingScore.id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ score: scoreValue }),\n      });\n\n      if (res.ok) {\n        setEditingScore(null);\n        setNewScore(\"\");\n        fetchData(); // Reload data\n        alert(\"C·∫≠p nh·∫≠t ƒëi·ªÉm th√†nh c√¥ng!\");\n      } else {\n        throw new Error(\"L·ªói c·∫≠p nh·∫≠t ƒëi·ªÉm\");\n      }\n    } catch (err) {\n      console.error(\"L·ªói c·∫≠p nh·∫≠t ƒëi·ªÉm:\", err);\n      alert(\"L·ªói c·∫≠p nh·∫≠t ƒëi·ªÉm: \" + err.message);\n    }\n  };\n\n  // Hi·ªÉn th·ªã loading\n  if (loading) {\n    return (\n      <div\n        style={{\n          border: \"1px solid #ccc\",\n          borderRadius: 20,\n          padding: \"20px 30px\",\n          background: \"white\",\n          textAlign: \"center\",\n        }}\n      >\n        <h2>ƒêang t·∫£i d·ªØ li·ªáu...</h2>\n        <p>Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>\n      </div>\n    );\n  }\n\n  // Hi·ªÉn th·ªã l·ªói\n  if (error) {\n    return (\n      <div\n        style={{\n          border: \"1px solid #ccc\",\n          borderRadius: 20,\n          padding: \"20px 30px\",\n          background: \"white\",\n          textAlign: \"center\",\n          color: \"red\",\n        }}\n      >\n        <h2>L·ªói</h2>\n        <p>{error}</p>\n        <button\n          onClick={fetchData}\n          style={{\n            padding: \"10px 20px\",\n            background: \"#F56416\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"20px\",\n            cursor: \"pointer\",\n          }}\n        >\n          Th·ª≠ l·∫°i\n        </button>\n      </div>\n    );\n  }\n\n  const userStats = getUserStats();\n\n  return (\n    <div\n      style={{\n        border: \"1px solid #ccc\",\n        borderRadius: 20,\n        padding: \"20px 30px\",\n        background: \"white\",\n      }}\n    >\n      {/* Header */}\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          marginBottom: \"20px\",\n        }}\n      >\n        <h2\n          style={{\n            margin: 0,\n            border: \"none\",\n            color: \"black\",\n            fontSize: 20,\n            fontWeight: \"600\",\n          }}\n        >\n          {user.role === \"admin\" ? \"K·∫øt qu·∫£ c·ªßa h·ªçc sinh\" : \"K·∫øt qu·∫£ c·ªßa t√¥i\"}\n        </h2>\n\n        {user.role === \"admin\" && (\n          <div\n            style={{\n              background: \"#f0f8ff\",\n              padding: \"8px 12px\",\n              borderRadius: \"10px\",\n              fontSize: \"0.8rem\",\n              color: \"#666\",\n            }}\n          >\n            T·ªïng s·ªë h·ªçc sinh: {Object.keys(userStats).length}\n          </div>\n        )}\n      </div>\n\n      <Link\n        to=\"/\"\n        style={{\n          textDecoration: \"none\",\n          color: \"#fb8500\",\n          marginBottom: 20,\n          display: \"inline-block\",\n          fontWeight: \"600\",\n        }}\n      >\n        ‚Üê Quay l·∫°i danh s√°ch b√†i t·∫≠p\n      </Link>\n\n      {/* Hi·ªÉn th·ªã cho admin - k·∫øt qu·∫£ t·∫•t c·∫£ h·ªçc sinh */}\n      {user.role === \"admin\" ? (\n        <div>\n          {Object.keys(userStats).length === 0 ? (\n            <div\n              style={{ textAlign: \"center\", padding: \"40px\", color: \"#666\" }}\n            >\n              <h3>Ch∆∞a c√≥ h·ªçc sinh n√†o l√†m b√†i t·∫≠p</h3>\n              <p>K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y khi h·ªçc sinh b·∫Øt ƒë·∫ßu l√†m b√†i</p>\n            </div>\n          ) : (\n            <div>\n              {Object.entries(userStats).map(([userId, stats]) => (\n                <div\n                  key={userId}\n                  style={{\n                    border: \"1px solid #e2e8f0\",\n                    padding: \"20px\",\n                    marginBottom: \"15px\",\n                    borderRadius: \"15px\",\n                    background: \"#f8fafc\",\n                    boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\n                  }}\n                >\n                  <div\n                    style={{\n                      display: \"flex\",\n                      justifyContent: \"space-between\",\n                      alignItems: \"center\",\n                      marginBottom: \"15px\",\n                    }}\n                  >\n                    <div>\n                      <h3 style={{ margin: \"0 0 5px 0\", color: \"#1e293b\" }}>\n                        {stats.user_name}\n                      </h3>\n                      <p\n                        style={{\n                          margin: 0,\n                          color: \"#64748b\",\n                          fontSize: \"0.9rem\",\n                        }}\n                      >\n                        {stats.user_email}\n                      </p>\n                    </div>\n                    <div style={{ textAlign: \"right\" }}>\n                      <div\n                        style={{\n                          fontSize: \"1.5rem\",\n                          fontWeight: \"700\",\n                          color: \"#F56416\",\n                          marginBottom: \"5px\",\n                        }}\n                      >\n                        {stats.average_score}/10\n                      </div>\n                      <div style={{ color: \"#64748b\", fontSize: \"0.8rem\" }}>\n                        ƒêi·ªÉm trung b√¨nh\n                      </div>\n                    </div>\n                  </div>\n\n                  <div\n                    style={{\n                      display: \"grid\",\n                      gridTemplateColumns:\n                        \"repeat(auto-fill, minmax(200px, 1fr))\",\n                      gap: \"10px\",\n                    }}\n                  >\n                    {stats.results.map((result, index) => (\n                      <div\n                        key={result.id || index}\n                        style={{\n                          border: \"1px solid #e2e8f0\",\n                          padding: \"12px\",\n                          borderRadius: \"10px\",\n                          background: \"white\",\n                          textAlign: \"center\",\n                          position: \"relative\",\n                        }}\n                      >\n                        {/* N√∫t s·ª≠a ƒëi·ªÉm cho admin */}\n                        {user.role === \"admin\" && (\n                          <button\n                            onClick={() => startEditScore(result)}\n                            style={{\n                              position: \"absolute\",\n                              top: \"5px\",\n                              right: \"5px\",\n                              background: \"#007bff\",\n                              color: \"white\",\n                              border: \"none\",\n                              borderRadius: \"5px\",\n                              padding: \"2px 6px\",\n                              fontSize: \"10px\",\n                              cursor: \"pointer\",\n                            }}\n                            title=\"S·ª≠a ƒëi·ªÉm\"\n                          >\n                            ‚úèÔ∏è\n                          </button>\n                        )}\n\n                        {/* Form s·ª≠a ƒëi·ªÉm */}\n                        {editingScore?.id === result.id ? (\n                          <div style={{ textAlign: \"center\" }}>\n                            <input\n                              type=\"number\"\n                              value={newScore}\n                              onChange={(e) => setNewScore(e.target.value)}\n                              min=\"0\"\n                              max=\"10\"\n                              style={{\n                                width: \"60px\",\n                                padding: \"4px\",\n                                textAlign: \"center\",\n                                border: \"1px solid #ccc\",\n                                borderRadius: \"4px\",\n                                marginBottom: \"5px\",\n                              }}\n                            />\n                            <div\n                              style={{\n                                display: \"flex\",\n                                gap: \"5px\",\n                                justifyContent: \"center\",\n                              }}\n                            >\n                              <button\n                                onClick={handleUpdateScore}\n                                style={{\n                                  padding: \"2px 6px\",\n                                  background: \"#28a745\",\n                                  color: \"white\",\n                                  border: \"none\",\n                                  borderRadius: \"3px\",\n                                  fontSize: \"10px\",\n                                  cursor: \"pointer\",\n                                }}\n                              >\n                                ‚úÖ\n                              </button>\n                              <button\n                                onClick={cancelEditScore}\n                                style={{\n                                  padding: \"2px 6px\",\n                                  background: \"#dc3545\",\n                                  color: \"white\",\n                                  border: \"none\",\n                                  borderRadius: \"3px\",\n                                  fontSize: \"10px\",\n                                  cursor: \"pointer\",\n                                }}\n                              >\n                                ‚ùå\n                              </button>\n                            </div>\n                          </div>\n                        ) : (\n                          <>\n                            <div\n                              style={{ fontWeight: \"600\", marginBottom: \"5px\" }}\n                            >\n                              {getQuizTitle(result.quiz_id)}\n                            </div>\n                            <div\n                              style={{\n                                fontSize: \"1.2rem\",\n                                fontWeight: \"700\",\n                                color:\n                                  result.score >= 5 ? \"#10b981\" : \"#ef4444\",\n                              }}\n                            >\n                              {result.score}/10\n                            </div>\n                            <div\n                              style={{\n                                fontSize: \"0.7rem\",\n                                color: \"#94a3b8\",\n                                marginTop: \"5px\",\n                              }}\n                            >\n                              {result.completed_at\n                                ? new Date(\n                                    result.completed_at\n                                  ).toLocaleDateString()\n                                : \"Ch∆∞a ho√†n th√†nh\"}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n\n                  <div\n                    style={{\n                      marginTop: \"15px\",\n                      padding: \"10px\",\n                      background: \"#e2e8f0\",\n                      borderRadius: \"8px\",\n                      textAlign: \"center\",\n                      fontSize: \"0.9rem\",\n                      color: \"#4a5568\",\n                    }}\n                  >\n                    ƒê√£ ho√†n th√†nh: {stats.quiz_count} b√†i t·∫≠p\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        /* Hi·ªÉn th·ªã k·∫øt qu·∫£ c√° nh√¢n cho user th∆∞·ªùng */\n        <div>\n          {results.length === 0 ? (\n            <div\n              style={{ textAlign: \"center\", padding: \"40px\", color: \"#666\" }}\n            >\n              <h3>B·∫°n ch∆∞a l√†m b√†i t·∫≠p n√†o</h3>\n              <p>H√£y quay l·∫°i trang ch·ªß v√† b·∫Øt ƒë·∫ßu l√†m b√†i t·∫≠p!</p>\n            </div>\n          ) : (\n            <div>\n              {results.map((result) => (\n                <div\n                  key={result.id}\n                  style={{\n                    border: \"1px solid #e2e8f0\",\n                    padding: \"20px\",\n                    marginBottom: \"15px\",\n                    borderRadius: \"15px\",\n                    background: \"#f8fafc\",\n                    boxShadow: \"0 4px 8px rgba(251, 133, 0, 0.2)\",\n                  }}\n                >\n                  <h3 style={{ margin: \"0 0 8px 0\", color: \"#1e293b\" }}>\n                    {getQuizTitle(result.quiz_id)}\n                  </h3>\n                  <div\n                    style={{\n                      display: \"flex\",\n                      gap: \"20px\",\n                      alignItems: \"center\",\n                    }}\n                  >\n                    <div>\n                      <strong style={{ color: \"#4a5568\" }}>ƒêi·ªÉm:</strong>\n                      <span\n                        style={{\n                          fontSize: \"1.2rem\",\n                          fontWeight: \"600\",\n                          color: result.score >= 5 ? \"#10b981\" : \"#ef4444\",\n                          marginLeft: \"8px\",\n                        }}\n                      >\n                        {result.score}/10\n                      </span>\n                    </div>\n                    <div>\n                      <strong style={{ color: \"#4a5568\" }}>Ho√†n th√†nh:</strong>\n                      <span style={{ marginLeft: \"8px\" }}>\n                        {result.completed_at\n                          ? new Date(result.completed_at).toLocaleString()\n                          : \"Ch∆∞a ho√†n th√†nh\"}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default ResultsPage;\n","size_bytes":18134},"src/components/RegisterPage.js":{"content":"import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction RegisterPage({ setUser }) {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    if (formData.password !== formData.confirmPassword) {\n      setError(\"M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!\");\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const res = await fetch(\"/api/register\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: formData.name,\n          email: formData.email,\n          password: formData.password,\n        }),\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        alert(\"ƒêƒÉng k√Ω th√†nh c√¥ng! Vui l√≤ng ƒëƒÉng nh·∫≠p.\");\n        window.location.href = \"/login\";\n      } else {\n        setError(data.error || \"L·ªói ƒëƒÉng k√Ω!\");\n      }\n    } catch (err) {\n      setError(\"L·ªói k·∫øt n·ªëi server!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        minHeight: \"100vh\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        padding: \"20px\",\n      }}\n    >\n      <div\n        style={{\n          width: \"100%\",\n          maxWidth: \"440px\",\n          background: \"white\",\n          borderRadius: \"16px\",\n          boxShadow: \"0 10px 30px rgba(0, 0, 0, 0.2)\",\n          padding: \"40px 35px\",\n          position: \"relative\",\n          overflow: \"hidden\",\n        }}\n      >\n        {/* Decorative elements */}\n        <div\n          style={{\n            position: \"absolute\",\n            top: \"-50px\",\n            right: \"-50px\",\n            width: \"120px\",\n            height: \"120px\",\n            background: \"linear-gradient(135deg, #E28413 0%, #DD4B1A 100%)\",\n            borderRadius: \"50%\",\n            opacity: \"0.1\",\n          }}\n        ></div>\n\n        <div\n          style={{\n            position: \"absolute\",\n            bottom: \"-30px\",\n            left: \"-30px\",\n            width: \"80px\",\n            height: \"80px\",\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n            borderRadius: \"50%\",\n            opacity: \"0.1\",\n          }}\n        ></div>\n\n        {/* Header */}\n        <div style={{ textAlign: \"center\", marginBottom: \"32px\" }}>\n          <h2\n            style={{\n              margin: \"0 0 8px 0\",\n              color: \"#1e293b\",\n              fontSize: \"28px\",\n              fontWeight: \"700\",\n            }}\n          >\n            ƒêƒÉng k√Ω t√†i kho·∫£n\n          </h2>\n          <p\n            style={{\n              margin: 0,\n              color: \"#64748b\",\n              fontSize: \"14px\",\n            }}\n          >\n            T·∫°o t√†i kho·∫£n ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc t·∫≠p\n          </p>\n        </div>\n\n        {error && (\n          <div\n            style={{\n              color: \"#dc2626\",\n              background: \"#fef2f2\",\n              padding: \"12px 16px\",\n              borderRadius: \"10px\",\n              marginBottom: \"20px\",\n              border: \"1px solid #fecaca\",\n              fontSize: \"14px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"8px\",\n            }}\n          >\n            <span style={{ fontSize: \"16px\" }}>‚ö†Ô∏è</span>\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleRegister}>\n          <div style={{ marginBottom: \"20px\" }}>\n            <label\n              style={{\n                display: \"block\",\n                marginBottom: \"8px\",\n                color: \"#374151\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n              }}\n            >\n              H·ªç v√† t√™n:\n            </label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleChange}\n              required\n              placeholder=\"Nh·∫≠p h·ªç v√† t√™n c·ªßa b·∫°n\"\n              style={{\n                width: \"100%\",\n                padding: \"14px 16px\",\n                border: \"1px solid #d1d5db\",\n                borderRadius: \"10px\",\n                fontSize: \"15px\",\n                transition: \"all 0.3s ease\",\n                boxSizing: \"border-box\",\n                background: \"#fafafa\",\n              }}\n              onFocus={(e) => {\n                e.target.style.borderColor = \"#E28413\";\n                e.target.style.background = \"white\";\n                e.target.style.boxShadow = \"0 0 0 3px rgba(226, 132, 19, 0.1)\";\n              }}\n              onBlur={(e) => {\n                e.target.style.borderColor = \"#d1d5db\";\n                e.target.style.background = \"#fafafa\";\n                e.target.style.boxShadow = \"none\";\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: \"20px\" }}>\n            <label\n              style={{\n                display: \"block\",\n                marginBottom: \"8px\",\n                color: \"#374151\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n              }}\n            >\n              Email:\n            </label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              required\n              placeholder=\"Nh·∫≠p email c·ªßa b·∫°n\"\n              style={{\n                width: \"100%\",\n                padding: \"14px 16px\",\n                border: \"1px solid #d1d5db\",\n                borderRadius: \"10px\",\n                fontSize: \"15px\",\n                transition: \"all 0.3s ease\",\n                boxSizing: \"border-box\",\n                background: \"#fafafa\",\n              }}\n              onFocus={(e) => {\n                e.target.style.borderColor = \"#E28413\";\n                e.target.style.background = \"white\";\n                e.target.style.boxShadow = \"0 0 0 3px rgba(226, 132, 19, 0.1)\";\n              }}\n              onBlur={(e) => {\n                e.target.style.borderColor = \"#d1d5db\";\n                e.target.style.background = \"#fafafa\";\n                e.target.style.boxShadow = \"none\";\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: \"20px\" }}>\n            <label\n              style={{\n                display: \"block\",\n                marginBottom: \"8px\",\n                color: \"#374151\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n              }}\n            >\n              M·∫≠t kh·∫©u:\n            </label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n              placeholder=\"Nh·∫≠p m·∫≠t kh·∫©u\"\n              style={{\n                width: \"100%\",\n                padding: \"14px 16px\",\n                border: \"1px solid #d1d5db\",\n                borderRadius: \"10px\",\n                fontSize: \"15px\",\n                transition: \"all 0.3s ease\",\n                boxSizing: \"border-box\",\n                background: \"#fafafa\",\n              }}\n              onFocus={(e) => {\n                e.target.style.borderColor = \"#E28413\";\n                e.target.style.background = \"white\";\n                e.target.style.boxShadow = \"0 0 0 3px rgba(226, 132, 19, 0.1)\";\n              }}\n              onBlur={(e) => {\n                e.target.style.borderColor = \"#d1d5db\";\n                e.target.style.background = \"#fafafa\";\n                e.target.style.boxShadow = \"none\";\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: \"28px\" }}>\n            <label\n              style={{\n                display: \"block\",\n                marginBottom: \"8px\",\n                color: \"#374151\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n              }}\n            >\n              X√°c nh·∫≠n m·∫≠t kh·∫©u:\n            </label>\n            <input\n              type=\"password\"\n              name=\"confirmPassword\"\n              value={formData.confirmPassword}\n              onChange={handleChange}\n              required\n              placeholder=\"Nh·∫≠p l·∫°i m·∫≠t kh·∫©u\"\n              style={{\n                width: \"100%\",\n                padding: \"14px 16px\",\n                border: \"1px solid #d1d5db\",\n                borderRadius: \"10px\",\n                fontSize: \"15px\",\n                transition: \"all 0.3s ease\",\n                boxSizing: \"border-box\",\n                background: \"#fafafa\",\n              }}\n              onFocus={(e) => {\n                e.target.style.borderColor = \"#E28413\";\n                e.target.style.background = \"white\";\n                e.target.style.boxShadow = \"0 0 0 3px rgba(226, 132, 19, 0.1)\";\n              }}\n              onBlur={(e) => {\n                e.target.style.borderColor = \"#d1d5db\";\n                e.target.style.background = \"#fafafa\";\n                e.target.style.boxShadow = \"none\";\n              }}\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            style={{\n              width: \"100%\",\n              padding: \"16px\",\n              background: loading\n                ? \"#cbd5e1\"\n                : \"linear-gradient(135deg, #E28413 0%, #DD4B1A 100%)\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"12px\",\n              fontSize: \"16px\",\n              cursor: loading ? \"not-allowed\" : \"pointer\",\n              fontWeight: \"600\",\n              transition: \"all 0.3s ease\",\n              boxShadow: loading\n                ? \"none\"\n                : \"0 4px 15px rgba(226, 132, 19, 0.3)\",\n              marginBottom: \"24px\",\n            }}\n            onMouseEnter={(e) => {\n              if (!loading) {\n                e.target.style.transform = \"translateY(-2px)\";\n                e.target.style.boxShadow = \"0 6px 20px rgba(226, 132, 19, 0.4)\";\n              }\n            }}\n            onMouseLeave={(e) => {\n              if (!loading) {\n                e.target.style.transform = \"translateY(0)\";\n                e.target.style.boxShadow = \"0 4px 15px rgba(226, 132, 19, 0.3)\";\n              }\n            }}\n          >\n            {loading ? (\n              <span>‚è≥ ƒêang ƒëƒÉng k√Ω...</span>\n            ) : (\n              <span>üöÄ ƒêƒÉng k√Ω t√†i kho·∫£n</span>\n            )}\n          </button>\n        </form>\n\n        <div\n          style={{\n            textAlign: \"center\",\n            paddingTop: \"20px\",\n            borderTop: \"1px solid #e2e8f0\",\n          }}\n        >\n          <p\n            style={{\n              margin: 0,\n              color: \"#64748b\",\n              fontSize: \"14px\",\n            }}\n          >\n            ƒê√£ c√≥ t√†i kho·∫£n?{\" \"}\n            <Link\n              to=\"/login\"\n              style={{\n                color: \"#E28413\",\n                textDecoration: \"none\",\n                fontWeight: \"600\",\n                transition: \"color 0.3s ease\",\n              }}\n              onMouseEnter={(e) => {\n                e.target.style.color = \"#DD4B1A\";\n              }}\n              onMouseLeave={(e) => {\n                e.target.style.color = \"#E28413\";\n              }}\n            >\n              ƒêƒÉng nh·∫≠p ngay\n            </Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default RegisterPage;\n","size_bytes":11784},"src/components/LoginPage.js":{"content":"import React, { useState, useEffect } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\n\nfunction LoginPage({ setUser }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [backendStatus, setBackendStatus] = useState(\"checking\");\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    checkBackendConnection();\n  }, []);\n\n  const checkBackendConnection = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5001/\");\n      if (res.ok) {\n        const data = await res.json();\n        console.log(\"Backend response:\", data);\n        setBackendStatus(\"connected\");\n      } else {\n        setBackendStatus(\"error\");\n      }\n    } catch (err) {\n      console.error(\"Backend connection error:\", err);\n      setBackendStatus(\"error\");\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(null);\n    setIsLoading(true);\n\n    try {\n      console.log(\"Attempting login...\");\n      const res = await fetch(\"http://localhost:5001/api/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      console.log(\"Login response status:\", res.status);\n\n      const data = await res.json();\n      console.log(\"Login response data:\", data);\n\n      if (!res.ok) {\n        throw new Error(data.error || `L·ªói server: ${res.status}`);\n      }\n\n      localStorage.setItem(\"user\", JSON.stringify(data));\n      setUser(data);\n\n      if (data.role === \"admin\") {\n        navigate(\"/admin\");\n      } else {\n        navigate(\"/\");\n      }\n    } catch (err) {\n      console.error(\"Login error:\", err);\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        minHeight: \"100vh\",\n        background: \"white\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        padding: \"20px\",\n      }}\n    >\n      <div\n        style={{\n          width: \"100%\",\n          maxWidth: \"440px\",\n          background: \"white\",\n          borderRadius: \"16px\",\n          boxShadow: \"0 10px 30px rgba(0, 0, 0, 0.1)\",\n          padding: \"40px 35px\",\n          position: \"relative\",\n          overflow: \"hidden\",\n          border: \"1px solid #f1f5f9\",\n        }}\n      >\n        {/* Decorative elements */}\n        <div\n          style={{\n            position: \"absolute\",\n            top: \"-50px\",\n            right: \"-50px\",\n            width: \"120px\",\n            height: \"120px\",\n            background: \"linear-gradient(135deg, #E28413 0%, #DD4B1A 100%)\",\n            borderRadius: \"50%\",\n            opacity: \"0.1\",\n          }}\n        ></div>\n\n        <div\n          style={{\n            position: \"absolute\",\n            bottom: \"-30px\",\n            left: \"-30px\",\n            width: \"80px\",\n            height: \"80px\",\n            background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n            borderRadius: \"50%\",\n            opacity: \"0.1\",\n          }}\n        ></div>\n\n        {/* Header */}\n        <div style={{ textAlign: \"center\", marginBottom: \"32px\" }}>\n          <h2\n            style={{\n              margin: \"0 0 8px 0\",\n              color: \"#1e293b\",\n              fontSize: \"28px\",\n              fontWeight: \"700\",\n            }}\n          >\n            ƒêƒÉng nh·∫≠p\n          </h2>\n          <p\n            style={{\n              margin: 0,\n              color: \"#64748b\",\n              fontSize: \"14px\",\n            }}\n          >\n            ƒêƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c h·ªçc t·∫≠p\n          </p>\n        </div>\n\n        {/* Backend Status */}\n        <div\n          style={{\n            marginBottom: \"20px\",\n            padding: \"12px 16px\",\n            background: backendStatus === \"connected\" ? \"#f0fdf4\" : \"#fef2f2\",\n            border:\n              backendStatus === \"connected\"\n                ? \"1px solid #bbf7d0\"\n                : \"1px solid #fecaca\",\n            borderRadius: \"10px\",\n            fontSize: \"14px\",\n          }}\n        >\n          <strong>Tr·∫°ng th√°i k·∫øt n·ªëi: </strong>\n          {backendStatus === \"checking\" && \"üîÑ ƒêang ki·ªÉm tra k·∫øt n·ªëi...\"}\n          {backendStatus === \"connected\" && \"‚úÖ ƒê√£ k·∫øt n·ªëi ƒë·∫øn backend\"}\n          {backendStatus === \"error\" && \"‚ùå Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn backend\"}\n        </div>\n\n        {error && (\n          <div\n            style={{\n              color: \"#dc2626\",\n              background: \"#fef2f2\",\n              padding: \"12px 16px\",\n              borderRadius: \"10px\",\n              marginBottom: \"20px\",\n              border: \"1px solid #fecaca\",\n              fontSize: \"14px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"8px\",\n            }}\n          >\n            <span style={{ fontSize: \"16px\" }}>‚ö†Ô∏è</span>\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <div style={{ marginBottom: \"20px\" }}>\n            <label\n              style={{\n                display: \"block\",\n                marginBottom: \"8px\",\n                color: \"#374151\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n              }}\n            >\n              Email:\n            </label>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n              placeholder=\"Nh·∫≠p email c·ªßa b·∫°n\"\n              style={{\n                width: \"100%\",\n                padding: \"14px 16px\",\n                border: \"1px solid #d1d5db\",\n                borderRadius: \"10px\",\n                fontSize: \"15px\",\n                transition: \"all 0.3s ease\",\n                boxSizing: \"border-box\",\n                background: \"#fafafa\",\n              }}\n              onFocus={(e) => {\n                e.target.style.borderColor = \"#E28413\";\n                e.target.style.background = \"white\";\n                e.target.style.boxShadow = \"0 0 0 3px rgba(226, 132, 19, 0.1)\";\n              }}\n              onBlur={(e) => {\n                e.target.style.borderColor = \"#d1d5db\";\n                e.target.style.background = \"#fafafa\";\n                e.target.style.boxShadow = \"none\";\n              }}\n            />\n          </div>\n\n          <div style={{ marginBottom: \"28px\" }}>\n            <label\n              style={{\n                display: \"block\",\n                marginBottom: \"8px\",\n                color: \"#374151\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n              }}\n            >\n              M·∫≠t kh·∫©u:\n            </label>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              placeholder=\"Nh·∫≠p m·∫≠t kh·∫©u\"\n              style={{\n                width: \"100%\",\n                padding: \"14px 16px\",\n                border: \"1px solid #d1d5db\",\n                borderRadius: \"10px\",\n                fontSize: \"15px\",\n                transition: \"all 0.3s ease\",\n                boxSizing: \"border-box\",\n                background: \"#fafafa\",\n              }}\n              onFocus={(e) => {\n                e.target.style.borderColor = \"#E28413\";\n                e.target.style.background = \"white\";\n                e.target.style.boxShadow = \"0 0 0 3px rgba(226, 132, 19, 0.1)\";\n              }}\n              onBlur={(e) => {\n                e.target.style.borderColor = \"#d1d5db\";\n                e.target.style.background = \"#fafafa\";\n                e.target.style.boxShadow = \"none\";\n              }}\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={isLoading || backendStatus === \"error\"}\n            style={{\n              width: \"100%\",\n              padding: \"16px\",\n              background:\n                isLoading || backendStatus === \"error\"\n                  ? \"#cbd5e1\"\n                  : \"linear-gradient(135deg, #E28413 0%, #DD4B1A 100%)\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"12px\",\n              fontSize: \"16px\",\n              cursor:\n                isLoading || backendStatus === \"error\"\n                  ? \"not-allowed\"\n                  : \"pointer\",\n              fontWeight: \"600\",\n              transition: \"all 0.3s ease\",\n              boxShadow:\n                isLoading || backendStatus === \"error\"\n                  ? \"none\"\n                  : \"0 4px 15px rgba(226, 132, 19, 0.3)\",\n              marginBottom: \"24px\",\n            }}\n            onMouseEnter={(e) => {\n              if (!isLoading && backendStatus !== \"error\") {\n                e.target.style.transform = \"translateY(-2px)\";\n                e.target.style.boxShadow = \"0 6px 20px rgba(226, 132, 19, 0.4)\";\n              }\n            }}\n            onMouseLeave={(e) => {\n              if (!isLoading && backendStatus !== \"error\") {\n                e.target.style.transform = \"translateY(0)\";\n                e.target.style.boxShadow = \"0 4px 15px rgba(226, 132, 19, 0.3)\";\n              }\n            }}\n          >\n            {isLoading ? (\n              <span>‚è≥ ƒêang ƒëƒÉng nh·∫≠p...</span>\n            ) : (\n              <span>üîë ƒêƒÉng nh·∫≠p</span>\n            )}\n          </button>\n        </form>\n\n        <div\n          style={{\n            textAlign: \"center\",\n            paddingTop: \"20px\",\n            borderTop: \"1px solid #e2e8f0\",\n          }}\n        >\n          <p\n            style={{\n              margin: 0,\n              color: \"#64748b\",\n              fontSize: \"14px\",\n            }}\n          >\n            Ch∆∞a c√≥ t√†i kho·∫£n?{\" \"}\n            <Link\n              to=\"/register\"\n              style={{\n                color: \"#E28413\",\n                textDecoration: \"none\",\n                fontWeight: \"600\",\n                transition: \"color 0.3s ease\",\n              }}\n              onMouseEnter={(e) => {\n                e.target.style.color = \"#DD4B1A\";\n              }}\n              onMouseLeave={(e) => {\n                e.target.style.color = \"#E28413\";\n              }}\n            >\n              ƒêƒÉng k√Ω ngay\n            </Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;\n","size_bytes":10503},"README.md":{"content":"# Getting Started with Create React App\n\nThis project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).\n\n## Available Scripts\n\nIn the project directory, you can run:\n\n### `npm start`\n\nRuns the app in the development mode.\\\nOpen [http://localhost:3000](http://localhost:3000) to view it in your browser.\n\nThe page will reload when you make changes.\\\nYou may also see any lint errors in the console.\n\n### `npm test`\n\nLaunches the test runner in the interactive watch mode.\\\nSee the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.\n\n### `npm run build`\n\nBuilds the app for production to the `build` folder.\\\nIt correctly bundles React in production mode and optimizes the build for the best performance.\n\nThe build is minified and the filenames include the hashes.\\\nYour app is ready to be deployed!\n\nSee the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.\n\n### `npm run eject`\n\n**Note: this is a one-way operation. Once you `eject`, you can't go back!**\n\nIf you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.\n\nInstead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.\n\nYou don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.\n\n## Learn More\n\nYou can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).\n\nTo learn React, check out the [React documentation](https://reactjs.org/).\n\n### Code Splitting\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)\n\n### Analyzing the Bundle Size\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)\n\n### Making a Progressive Web App\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)\n\n### Advanced Configuration\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)\n\n### Deployment\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)\n\n### `npm run build` fails to minify\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)\n","size_bytes":3359},"src/components/UserHome.js":{"content":"import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction UserHome({ user }) {\n  const [quizzes, setQuizzes] = useState([]);\n  const [results, setResults] = useState([]);\n\n  useEffect(() => {\n    fetchQuizzes();\n    fetchMyResults();\n  }, [user]);\n\n  const fetchQuizzes = async () => {\n    try {\n      const res = await fetch(\"/api/quizzes\");\n      const data = await res.json();\n      setQuizzes(data);\n    } catch (err) {\n      console.error(\"L·ªói t·∫£i quizzes:\", err);\n    }\n  };\n\n  const fetchMyResults = async () => {\n    try {\n      const res = await fetch(`/api/my-results/${user.id}`);\n      const data = await res.json();\n      setResults(data);\n    } catch (err) {\n      console.error(\"L·ªói t·∫£i k·∫øt qu·∫£:\", err);\n    }\n  };\n\n  const getQuizResult = (quizId) => {\n    return results.find((result) => result.quiz_id === quizId);\n  };\n\n  return (\n    <div\n      style={{\n        border: \"1px solid #ccc\",\n        borderRadius: 20,\n        padding: \"10px 30px\",\n      }}\n    >\n      <h2>Danh s√°ch b√†i t·∫≠p</h2>\n\n      <div style={{ marginBottom: 20 }}>\n        <Link\n          to=\"/results\"\n          style={{ textDecoration: \"none\", color: \"#fb8500\" }}\n        >\n          {user.role === \"admin\"\n            ? \"Xem k·∫øt qu·∫£ c·ªßa c√°c h·ªçc sinh\"\n            : \"Xem k·∫øt qu·∫£ c·ªßa t√¥i\"}\n        </Link>\n      </div>\n\n      {quizzes.map((quiz) => {\n        const result = getQuizResult(quiz.id);\n        return (\n          <div\n            key={quiz.id}\n            style={{\n              border: \"1px solid #ccc\",\n              padding: 15,\n              marginBottom: 10,\n              borderRadius: 20,\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              boxShadow: \"0 4px 8px rgba(251, 133, 0, 0.2)\",\n            }}\n          >\n            <div>\n              <h3>{quiz.title}</h3>\n              <p>{quiz.description}</p>\n            </div>\n\n            {user.role === \"admin\" ? (\n              <div>\n                <Link to=\"/results\">\n                  <button\n                    style={{\n                      padding: \"8px 16px\",\n                      cursor: \"pointer\",\n                      borderRadius: 20,\n                      border: \"1px solid #ccc\",\n                      background: \"transparent\",\n                    }}\n                    onMouseEnter={(e) => {\n                      e.target.style.background = \"#F56416\";\n                      e.target.style.border = \"none\";\n                      e.target.style.color = \"white\";\n                      e.target.style.borderRadius = \"20px\";\n                      e.target.style.transform = \"translateY(-1px)\";\n                      e.target.style.fontWeight = \"bolder\"; \n                    }}\n                    onMouseLeave={(e) => {\n                      e.target.style.background = \"transparent\";\n                      e.target.style.border = \"1px solid #ccc\";\n                      e.target.style.fontWeight = \"normal\"; \n                      e.target.style.color = \"black\";\n                      e.target.style.transform = \"translateY(0)\";\n                    }}\n                  >\n                    Ki·ªÉm tra\n                  </button>\n                </Link>\n              </div>\n            ) : (\n              <div style={{ textAlign: \"right\" }}>\n                {result ? (\n                  <div>\n                    <span style={{ color: \"green\" }}>ƒê√£ l√†m</span>\n                    <br />\n                    <strong>ƒêi·ªÉm: {result.score}/10</strong>\n                  </div>\n                ) : (\n                  <Link to={`/quiz/${quiz.id}`}>\n                    <button\n                      style={{\n                        padding: \"8px 16px\",\n                        cursor: \"pointer\",\n                        borderRadius: 20,\n                        border: \"1px solid #ccc\",\n                        background: \"transparent\",\n                      }}\n                      onMouseEnter={(e) => {\n                        e.target.style.background = \"#F56416\";\n                        e.target.style.border = \"none\";\n                        e.target.style.color = \"white\";\n                        e.target.style.borderRadius = \"20px\";\n                        e.target.style.transform = \"translateY(-1px)\";\n                        e.target.style.fontWeight = \"bolder\";\n                      }}\n                      onMouseLeave={(e) => {\n                        e.target.style.background = \"transparent\";\n                        e.target.style.border = \"1px solid #ccc\";\n                        e.target.style.fontWeight = \"normal\";\n                        e.target.style.color = \"black\";\n                        e.target.style.transform = \"translateY(0)\";\n                      }}\n                    >\n                      L√†m b√†i\n                    </button>\n                  </Link>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default UserHome;\n","size_bytes":5080},"src/App.css":{"content":"","size_bytes":0},"src/components/AdminPage.js":{"content":"import React, { useState, useEffect } from \"react\";\n\nfunction AdminPage() {\n  const [quizzes, setQuizzes] = useState([]);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingQuiz, setEditingQuiz] = useState(null);\n  const [selectedQuiz, setSelectedQuiz] = useState(null);\n  const [showStudentPopup, setStudentPopup] = useState(false);\n  const [studentResults, setStudentResult] = useState([]);\n  const [newQuiz, setNewQuiz] = useState({\n    title: \"\",\n    description: \"\",\n    questions: [\n      {\n        question_text: \"\",\n        options: [\"\", \"\", \"\", \"\"],\n        correct_answer: \"\",\n      },\n    ],\n  });\n\n  useEffect(() => {\n    fetchQuizzes();\n  }, []);\n\n  const fetchQuizzes = async () => {\n    try {\n      const res = await fetch(\"/api/quizzes\");\n      const data = await res.json();\n\n      // Fetch questions for each quiz\n      const quizzesWithQuestions = await Promise.all(\n        data.map(async (quiz) => {\n          try {\n            const questionsRes = await fetch(\n              `/api/quizzes/${quiz.id}/questions`\n            );\n            const questions = await questionsRes.json();\n            return {\n              ...quiz,\n              questions,\n              completed_count: quiz.completed_count || 0,\n            };\n          } catch (err) {\n            console.error(`L·ªói t·∫£i c√¢u h·ªèi cho quiz ${quiz.id}:`, err);\n            return {\n              ...quiz,\n              questions: [],\n              completed_count: quiz.completed_count || 0,\n            };\n          }\n        })\n      );\n\n      setQuizzes(quizzesWithQuestions);\n    } catch (err) {\n      console.error(\"L·ªói t·∫£i quizzes:\", err);\n    }\n  };\n\n  const fetchStudentResults = async (quizId) => {\n    try {\n      const res = await fetch(`/api/quizzes/${quizId}/results`);\n      const data = await res.json();\n      setStudentResult(data);\n    } catch (err) {\n      console.log(\"L·ªói t·∫£i k·∫øt qu·∫£ h·ªçc sinh: \", err);\n      setStudentResult([]);\n    }\n  };\n\n  const handleAddQuiz = async (e) => {\n    e.preventDefault();\n    try {\n      // 1. T·∫°o b√†i t·∫≠p tr∆∞·ªõc\n      const quizRes = await fetch(\"/api/quizzes\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          title: newQuiz.title,\n          description: newQuiz.description,\n        }),\n      });\n\n      if (quizRes.ok) {\n        const quizData = await quizRes.json();\n        const quizId = quizData.id;\n\n        // 2. Th√™m c√°c c√¢u h·ªèi\n        const validQuestions = newQuiz.questions.filter(\n          (q) => q.question_text.trim() && q.correct_answer.trim()\n        );\n\n        if (validQuestions.length > 0) {\n          await Promise.all(\n            validQuestions.map((question) =>\n              fetch(`/api/quizzes/${quizId}/questions`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(question),\n              })\n            )\n          );\n        }\n\n        // 3. Reset form v√† reload data\n        setNewQuiz({\n          title: \"\",\n          description: \"\",\n          questions: [\n            {\n              question_text: \"\",\n              options: [\"\", \"\", \"\", \"\"],\n              correct_answer: \"\",\n            },\n          ],\n        });\n        setShowAddForm(false);\n        fetchQuizzes();\n        alert(\"T·∫°o b√†i t·∫≠p th√†nh c√¥ng!\");\n      }\n    } catch (err) {\n      console.error(\"L·ªói th√™m quiz:\", err);\n      alert(\"L·ªói t·∫°o b√†i t·∫≠p: \" + err.message);\n    }\n  };\n\n  const handleUpdateQuiz = async (e) => {\n    e.preventDefault();\n    try {\n      // 1. C·∫≠p nh·∫≠t th√¥ng tin b√†i t·∫≠p\n      const quizRes = await fetch(`/api/quizzes/${editingQuiz.id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          title: newQuiz.title,\n          description: newQuiz.description,\n        }),\n      });\n\n      if (quizRes.ok) {\n        // 2. X√°c ƒë·ªãnh c√¢u h·ªèi n√†o c·∫ßn x√≥a (c√¢u h·ªèi c≈© kh√¥ng c√≥ trong form m·ªõi)\n        const currentQuestionIds = editingQuiz.questions\n          ? editingQuiz.questions.map((q) => q.id)\n          : [];\n        const questionsToDelete = currentQuestionIds.filter(\n          (id) => !newQuiz.questions.some((q) => q.id === id)\n        );\n\n        // 3. X√≥a c√°c c√¢u h·ªèi ƒë√£ b·ªã x√≥a kh·ªèi form\n        if (questionsToDelete.length > 0) {\n          await Promise.all(\n            questionsToDelete.map((questionId) =>\n              fetch(`/api/questions/${questionId}`, { method: \"DELETE\" })\n            )\n          );\n        }\n\n        // 4. X·ª≠ l√Ω t·ª´ng c√¢u h·ªèi trong form\n        await Promise.all(\n          newQuiz.questions.map(async (question) => {\n            if (question.id) {\n              // C√¢u h·ªèi ƒë√£ t·ªìn t·∫°i - c·∫≠p nh·∫≠t\n              return fetch(`/api/questions/${question.id}`, {\n                method: \"PUT\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({\n                  question_text: question.question_text,\n                  options: question.options,\n                  correct_answer: question.correct_answer,\n                }),\n              });\n            } else {\n              // C√¢u h·ªèi m·ªõi - th√™m m·ªõi\n              return fetch(`/api/quizzes/${editingQuiz.id}/questions`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(question),\n              });\n            }\n          })\n        );\n\n        // 5. Reset form v√† reload data\n        setNewQuiz({\n          title: \"\",\n          description: \"\",\n          questions: [\n            {\n              question_text: \"\",\n              options: [\"\", \"\", \"\", \"\"],\n              correct_answer: \"\",\n            },\n          ],\n        });\n        setEditingQuiz(null);\n        setShowAddForm(false);\n        fetchQuizzes();\n        alert(\"C·∫≠p nh·∫≠t b√†i t·∫≠p th√†nh c√¥ng!\");\n      }\n    } catch (err) {\n      console.error(\"L·ªói c·∫≠p nh·∫≠t quiz:\", err);\n      alert(\"L·ªói c·∫≠p nh·∫≠t b√†i t·∫≠p: \" + err.message);\n    }\n  };\n\n  const handleDeleteQuiz = async (quizId) => {\n    if (window.confirm(\"B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a b√†i t·∫≠p n√†y?\")) {\n      try {\n        const res = await fetch(`/api/quizzes/${quizId}`, {\n          method: \"DELETE\",\n        });\n\n        if (res.ok) {\n          fetchQuizzes();\n        }\n      } catch (err) {\n        console.error(\"L·ªói x√≥a quiz:\", err);\n      }\n    }\n  };\n\n  const handleDeleteQuestion = async (quizId, questionId) => {\n    if (window.confirm(\"B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a c√¢u h·ªèi n√†y?\")) {\n      try {\n        const res = await fetch(`/api/questions/${questionId}`, {\n          method: \"DELETE\",\n        });\n\n        if (res.ok) {\n          fetchQuizzes();\n        }\n      } catch (err) {\n        console.error(\"L·ªói x√≥a c√¢u h·ªèi:\", err);\n      }\n    }\n  };\n\n  // QUESTION MANAGEMENT\n  const addNewQuestion = () => {\n    setNewQuiz((prev) => ({\n      ...prev,\n      questions: [\n        ...prev.questions,\n        {\n          question_text: \"\",\n          options: [\"\", \"\", \"\", \"\"],\n          correct_answer: \"\",\n        },\n      ],\n    }));\n  };\n\n  const removeQuestion = (index) => {\n    if (newQuiz.questions.length > 1) {\n      setNewQuiz((prev) => ({\n        ...prev,\n        questions: prev.questions.filter((_, i) => i !== index),\n      }));\n    }\n  };\n\n  const updateQuestion = (index, field, value) => {\n    setNewQuiz((prev) => {\n      const updatedQuestions = [...prev.questions];\n      updatedQuestions[index] = {\n        ...updatedQuestions[index],\n        [field]: value,\n      };\n      return { ...prev, questions: updatedQuestions };\n    });\n  };\n\n  const updateQuestionOption = (questionIndex, optionIndex, value) => {\n    setNewQuiz((prev) => {\n      const updatedQuestions = [...prev.questions];\n      const updatedOptions = [...updatedQuestions[questionIndex].options];\n      updatedOptions[optionIndex] = value;\n      updatedQuestions[questionIndex] = {\n        ...updatedQuestions[questionIndex],\n        options: updatedOptions,\n      };\n      return { ...prev, questions: updatedQuestions };\n    });\n  };\n\n  const startEditQuiz = (quiz) => {\n    setEditingQuiz(quiz);\n    setNewQuiz({\n      title: quiz.title,\n      description: quiz.description,\n      questions:\n        quiz.questions && quiz.questions.length > 0\n          ? quiz.questions.map((q) => ({\n              id: q.id,\n              question_text: q.question_text,\n              options: JSON.parse(q.options),\n              correct_answer: q.correct_answer,\n            }))\n          : [\n              {\n                question_text: \"\",\n                options: [\"\", \"\", \"\", \"\"],\n                correct_answer: \"\",\n              },\n            ],\n    });\n    setShowAddForm(true);\n  };\n\n  const cancelEdit = () => {\n    setEditingQuiz(null);\n    setNewQuiz({\n      title: \"\",\n      description: \"\",\n      questions: [\n        {\n          question_text: \"\",\n          options: [\"\", \"\", \"\", \"\"],\n          correct_answer: \"\",\n        },\n      ],\n    });\n    setShowAddForm(false);\n  };\n\n  const handleShowPopup = async (quiz) => {\n    setSelectedQuiz(quiz);\n    await fetchStudentResults(quiz.id);\n    setStudentPopup(true);\n  };\n\n  const handleClosePopup = () => {\n    setStudentPopup(false);\n    setSelectedQuiz(null);\n    setStudentResult([]);\n  };\n\n  return (\n    <div>\n      <h2>Qu·∫£n l√Ω b√†i t·∫≠p</h2>\n\n      <button\n        onClick={() => {\n          setShowAddForm(!showAddForm);\n          setEditingQuiz(null);\n          setNewQuiz({\n            title: \"\",\n            description: \"\",\n            questions: [\n              {\n                question_text: \"\",\n                options: [\"\", \"\", \"\", \"\"],\n                correct_answer: \"\",\n              },\n            ],\n          });\n        }}\n        style={{\n          marginBottom: 20,\n          padding: \"10px 15px\",\n          cursor: \"pointer\",\n          borderRadius: \"20px\",\n          border: \"none\",\n          backgroundColor: showAddForm ? \"red\" : \"#F56416\",\n          color: \"white\",\n          fontWeight: \"600\",\n          transition: \"all 0.3s ease\",\n        }}\n      >\n        {showAddForm ? \"H·ªßy\" : \"Th√™m b√†i t·∫≠p m·ªõi\"}\n      </button>\n\n      {/* Form th√™m/s·ª≠a b√†i t·∫≠p v·ªõi c√¢u h·ªèi */}\n      {(showAddForm || editingQuiz) && (\n        <form\n          onSubmit={editingQuiz ? handleUpdateQuiz : handleAddQuiz}\n          style={{\n            border: \"1px solid #ccc\",\n            padding: 20,\n            marginBottom: 20,\n            borderRadius: 10,\n            background: \"#f8f9fa\",\n          }}\n        >\n          <h3>{editingQuiz ? \"S·ª≠a b√†i t·∫≠p\" : \"Th√™m b√†i t·∫≠p m·ªõi\"}</h3>\n\n          {/* Th√¥ng tin b√†i t·∫≠p */}\n          <div style={{ marginBottom: 20 }}>\n            <h4 style={{ marginBottom: 10 }}>Th√¥ng tin b√†i t·∫≠p</h4>\n            <div style={{ marginBottom: 10 }}>\n              <input\n                type=\"text\"\n                placeholder=\"Ti√™u ƒë·ªÅ b√†i t·∫≠p\"\n                value={newQuiz.title}\n                onChange={(e) =>\n                  setNewQuiz({ ...newQuiz, title: e.target.value })\n                }\n                style={{\n                  width: \"99%\",\n                  padding: 8,\n                  borderRadius: 10,\n                  border: \"1px solid grey\",\n                }}\n                required\n              />\n            </div>\n            <div style={{ marginBottom: 10 }}>\n              <textarea\n                placeholder=\"M√¥ t·∫£ b√†i t·∫≠p\"\n                value={newQuiz.description}\n                onChange={(e) =>\n                  setNewQuiz({ ...newQuiz, description: e.target.value })\n                }\n                style={{\n                  width: \"99%\",\n                  padding: 8,\n                  height: 60,\n                  borderRadius: 10,\n                  border: \"1px solid grey\",\n                }}\n                required\n              />\n            </div>\n          </div>\n\n          {/* Danh s√°ch c√¢u h·ªèi */}\n          <div style={{ marginBottom: 20 }}>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                marginBottom: 10,\n              }}\n            >\n              <h4 style={{ margin: 0 }}>\n                C√¢u h·ªèi ({newQuiz.questions.length})\n              </h4>\n              <button\n                type=\"button\"\n                onClick={addNewQuestion}\n                style={{\n                  padding: \"5px 10px\",\n                  cursor: \"pointer\",\n                  borderRadius: 15,\n                  border: \"1px solid #28a745\",\n                  backgroundColor: \"transparent\",\n                  color: \"#28a745\",\n                  fontSize: \"12px\",\n                  fontWeight: \"600\",\n                }}\n              >\n                + Th√™m c√¢u h·ªèi\n              </button>\n            </div>\n\n            {newQuiz.questions.map((question, questionIndex) => (\n              <div\n                key={questionIndex}\n                style={{\n                  border: \"1px solid #ddd\",\n                  padding: 15,\n                  marginBottom: 15,\n                  borderRadius: 8,\n                  background: \"white\",\n                }}\n              >\n                <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    alignItems: \"center\",\n                    marginBottom: 10,\n                  }}\n                >\n                  <h5 style={{ margin: 0 }}>C√¢u h·ªèi {questionIndex + 1}</h5>\n                  {newQuiz.questions.length > 1 && (\n                    <button\n                      type=\"button\"\n                      onClick={() => removeQuestion(questionIndex)}\n                      style={{\n                        padding: \"2px 8px\",\n                        cursor: \"pointer\",\n                        borderRadius: 10,\n                        border: \"none\",\n                        backgroundColor: \"#dc3545\",\n                        color: \"white\",\n                        fontSize: \"10px\",\n                      }}\n                    >\n                      X√≥a\n                    </button>\n                  )}\n                </div>\n\n                {/* N·ªôi dung c√¢u h·ªèi */}\n                <div style={{ marginBottom: 10 }}>\n                  <textarea\n                    placeholder=\"Nh·∫≠p n·ªôi dung c√¢u h·ªèi...\"\n                    value={question.question_text}\n                    onChange={(e) =>\n                      updateQuestion(\n                        questionIndex,\n                        \"question_text\",\n                        e.target.value\n                      )\n                    }\n                    style={{\n                      width: \"97%\",\n                      padding: 8,\n                      height: 30,\n                      borderRadius: 8,\n                      border: \"1px solid #ccc\",\n                    }}\n                    required\n                  />\n                </div>\n\n                {/* C√°c l·ª±a ch·ªçn */}\n                <div style={{ marginBottom: 10 }}>\n                  <label\n                    style={{\n                      display: \"block\",\n                      marginBottom: 10,\n                      fontWeight: \"600\",\n                    }}\n                  >\n                    C√°c l·ª±a ch·ªçn:\n                  </label>\n                  {question.options.map((option, optionIndex) => (\n                    <div key={optionIndex} style={{ marginBottom: 5 }}>\n                      <input\n                        type=\"text\"\n                        placeholder={`L·ª±a ch·ªçn ${String.fromCharCode(\n                          65 + optionIndex\n                        )}`}\n                        value={option}\n                        onChange={(e) =>\n                          updateQuestionOption(\n                            questionIndex,\n                            optionIndex,\n                            e.target.value\n                          )\n                        }\n                        style={{\n                          width: \"98%\",\n                          padding: 6,\n                          borderRadius: 6,\n                          border: \"1px solid #ccc\",\n                        }}\n                        required\n                      />\n                    </div>\n                  ))}\n                </div>\n\n                {/* ƒê√°p √°n ƒë√∫ng */}\n                <div>\n                  <label\n                    style={{\n                      display: \"block\",\n                      marginBottom: 5,\n                      fontWeight: \"600\",\n                    }}\n                  >\n                    ƒê√°p √°n ƒë√∫ng:\n                  </label>\n                  <select\n                    value={question.correct_answer}\n                    onChange={(e) =>\n                      updateQuestion(\n                        questionIndex,\n                        \"correct_answer\",\n                        e.target.value\n                      )\n                    }\n                    style={{\n                      width: \"100%\",\n                      padding: 6,\n                      borderRadius: 6,\n                      border: \"1px solid #ccc\",\n                    }}\n                    required\n                  >\n                    <option value=\"\">Ch·ªçn ƒë√°p √°n ƒë√∫ng</option>\n                    {question.options.map(\n                      (option, optionIndex) =>\n                        option && (\n                          <option key={optionIndex} value={option}>\n                            {String.fromCharCode(65 + optionIndex)}: {option}\n                          </option>\n                        )\n                    )}\n                  </select>\n                </div>\n              </div>\n            ))}\n          </div>\n\n          <div style={{ display: \"flex\", gap: \"10px\" }}>\n            <button\n              type=\"submit\"\n              style={{\n                padding: \"10px 20px\",\n                cursor: \"pointer\",\n                borderRadius: 20,\n                border: \"none\",\n                backgroundColor: \"#F56416\",\n                color: \"white\",\n                fontWeight: \"600\",\n              }}\n            >\n              {editingQuiz ? \"C·∫≠p nh·∫≠t b√†i t·∫≠p\" : \"T·∫°o b√†i t·∫≠p\"}\n            </button>\n            {editingQuiz && (\n              <button\n                type=\"button\"\n                onClick={cancelEdit}\n                style={{\n                  padding: \"10px 20px\",\n                  cursor: \"pointer\",\n                  borderRadius: 20,\n                  border: \"1px solid #F56416\",\n                  backgroundColor: \"transparent\",\n                  color: \"#F56416\",\n                  fontWeight: \"600\",\n                }}\n              >\n                H·ªßy\n              </button>\n            )}\n          </div>\n        </form>\n      )}\n\n      {/* Danh s√°ch b√†i t·∫≠p */}\n      <div\n        style={{\n          border: \"1px solid #ccc\",\n          borderRadius: 20,\n          padding: 20,\n          boxShadow: \"0 4px 6px -1px rgba(0,0,0,0.1)\",\n        }}\n      >\n        <h3>Danh s√°ch b√†i t·∫≠p ({quizzes.length})</h3>\n\n        {quizzes.length === 0 ? (\n          <p style={{ textAlign: \"center\", color: \"#666\", padding: 20 }}>\n            Ch∆∞a c√≥ b√†i t·∫≠p n√†o. H√£y th√™m b√†i t·∫≠p ƒë·∫ßu ti√™n!\n          </p>\n        ) : (\n          quizzes.map((quiz) => (\n            <div\n              key={quiz.id}\n              style={{\n                border: \"1px solid #ccc\",\n                padding: 20,\n                marginBottom: 15,\n                borderRadius: 15,\n                boxShadow: \"0 4px 8px rgba(251, 133, 0, 0.2)\",\n                background: \"white\",\n              }}\n            >\n              <h4\n                style={{\n                  color: \"#1e293b\",\n                  fontSize: 18,\n                  fontWeight: \"600\",\n                  marginBottom: 5,\n                  marginTop: 0,\n                }}\n              >\n                {quiz.title}\n              </h4>\n              <p style={{ marginBottom: 10, color: \"#666\" }}>\n                {quiz.description}\n              </p>\n              <small style={{ color: \"#999\" }}>\n                Ng√†y t·∫°o: {new Date(quiz.created_at).toLocaleDateString()} | S·ªë\n                c√¢u h·ªèi: {quiz.questions ? quiz.questions.length : 0} |\n                <span\n                  onClick={() => handleShowPopup(quiz)}\n                  style={{\n                    cursor: \"pointer\",\n                    color: \"#E28413\",\n                    fontWeight: \"600\",\n                    marginLeft: \"5px\",\n                  }}\n                >\n                  ƒê√£ l√†m: {quiz.completed_count}\n                </span>\n                {/* Popup hi·ªÉn th·ªã danh s√°ch h·ªçc sinh */}\n                {showStudentPopup && selectedQuiz && (\n                  <div\n                    style={{\n                      position: \"fixed\",\n                      top: 0,\n                      left: 0,\n                      right: 0,\n                      bottom: 0,\n                      background: \"rgba(0,0,0,0.5)\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\",\n                      zIndex: 1000,\n                    }}\n                    onClick={handleClosePopup}\n                  >\n                    <div\n                      style={{\n                        background: \"white\",\n                        padding: \"24px\",\n                        borderRadius: \"12px\",\n                        width: \"500px\",\n                        maxWidth: \"90vw\",\n                        maxHeight: \"80vh\",\n                        overflow: \"auto\",\n                      }}\n                      onClick={(e) => e.stopPropagation()}\n                    >\n                      <div\n                        style={{\n                          display: \"flex\",\n                          justifyContent: \"space-between\",\n                          alignItems: \"center\",\n                          marginBottom: \"16px\",\n                          borderBottom: \"1px solid #e2e8f0\",\n                          paddingBottom: \"12px\",\n                        }}\n                      >\n                        <h3 style={{ margin: 0, color: \"#E28413\" }}>\n                          Danh s√°ch s·ªë h·ªçc sinh ƒë√£ l√†m {selectedQuiz.title}\n                        </h3>\n                        <button\n                          onClick={handleClosePopup}\n                          style={{\n                            background: \"none\",\n                            border: \"none\",\n                            fontSize: \"18px\",\n                            cursor: \"pointer\",\n                            color: \"#666\",\n                          }}\n                        >\n                          x\n                        </button>\n                      </div>\n\n                      <div style={{ marginBottom: \"16px\" }}>\n                        <p style={{ margin: \"0 0 8px 0\", color: \"black\" }}>\n                          T·ªïng s·ªë h·ªçc sinh: {studentResults.length}\n                        </p>\n                      </div>\n\n                      <div style={{ maxHeight: \"400px\", overflowY: \"auto\" }}>\n                        {studentResults.length > 0 ? (\n                          studentResults.map((student, index) => (\n                            <div\n                              key={index}\n                              style={{\n                                padding: \"12px\",\n                                border: \"1px solid #e2e8f0\",\n                                borderRadius: \"6px\",\n                                marginBottom: \"8px\",\n                                background: \"#f8fafc\",\n                              }}\n                            >\n                              <div\n                                style={{\n                                  fontWeight: \"600\",\n                                  marginBottom: \"5px\",\n                                  color: \"#E28413\"\n                                }}\n                              >\n                                {student.name}\n                              </div>\n                              <div style={{ fontSize: \"14px\", color: \"black\" }}>\n                                ƒêi·ªÉm: {student.score} | Th·ªùi gian:{\" \"}\n                                {new Date(\n                                  student.completed_at\n                                ).toLocaleString()}\n                              </div>\n                            </div>\n                          ))\n                        ) : (\n                          <div\n                            style={{\n                              textAlign: \"center\",\n                              color: \"black\",\n                              padding: \"20px\",\n                            }}\n                          >\n                            Ch∆∞a c√≥ h·ªçc sinh n√†o l√†m b√†i n√†y\n                          </div>\n                        )}\n                      </div>\n\n                      <div\n                        style={{\n                          marginTop: \"16px\",\n                          display: \"flex\",\n                          justifyContent: \"flex-end\",\n                        }}\n                      >\n                        <button\n                          onClick={handleClosePopup}\n                          style={{\n                            padding: \"8px 16px\",\n                            background: \"#64748b\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"6px\",\n                            cursor: \"pointer\",\n                          }}\n                          onMouseEnter={(e) => {\n                            e.target.style.background = \"#E28413\";\n                          }}\n                          onMouseLeave={(e) => {\n                            e.target.style.background = \"#64748b\";\n                          }}\n                        >\n                          ƒê√≥ng\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </small>\n\n              {/* Hi·ªÉn th·ªã c√¢u h·ªèi */}\n              {quiz.questions && quiz.questions.length > 0 && (\n                <div\n                  style={{\n                    marginTop: 15,\n                    padding: 15,\n                    background: \"#f8f9fa\",\n                    borderRadius: 10,\n                  }}\n                >\n                  <h5 style={{ margin: \"0 0 10px 0\" }}>C√¢u h·ªèi trong b√†i:</h5>\n                  {quiz.questions.map((question, index) => (\n                    <div\n                      key={question.id}\n                      style={{\n                        marginBottom: 10,\n                        padding: 10,\n                        background: \"white\",\n                        borderRadius: 8,\n                        border: \"1px solid #ddd\",\n                      }}\n                    >\n                      <div style={{ fontWeight: \"600\", marginBottom: 5 }}>\n                        C√¢u {index + 1}: {question.question_text}\n                      </div>\n                      <div style={{ fontSize: \"0.8rem\", color: \"#666\" }}>\n                        ƒê√°p √°n ƒë√∫ng: <strong>{question.correct_answer}</strong>\n                      </div>\n                      <button\n                        onClick={() =>\n                          handleDeleteQuestion(quiz.id, question.id)\n                        }\n                        style={{\n                          marginTop: 5,\n                          padding: \"2px 8px\",\n                          cursor: \"pointer\",\n                          borderRadius: 10,\n                          border: \"none\",\n                          backgroundColor: \"#ff6b6b\",\n                          color: \"white\",\n                          fontSize: \"10px\",\n                        }}\n                      >\n                        X√≥a c√¢u h·ªèi\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {/* N√∫t qu·∫£n l√Ω */}\n              <div\n                style={{\n                  marginTop: 15,\n                  display: \"flex\",\n                  gap: \"10px\",\n                  flexWrap: \"wrap\",\n                }}\n              >\n                <button\n                  onClick={() => startEditQuiz(quiz)}\n                  style={{\n                    padding: \"6px 12px\",\n                    cursor: \"pointer\",\n                    borderRadius: 15,\n                    border: \"none\",\n                    backgroundColor: \"#007bff\",\n                    color: \"white\",\n                    fontSize: \"12px\",\n                    fontWeight: \"600\",\n                  }}\n                >\n                  ‚úèÔ∏è S·ª≠a b√†i t·∫≠p\n                </button>\n                <button\n                  onClick={() => handleDeleteQuiz(quiz.id)}\n                  style={{\n                    padding: \"6px 12px\",\n                    cursor: \"pointer\",\n                    borderRadius: 15,\n                    border: \"none\",\n                    backgroundColor: \"#dc3545\",\n                    color: \"white\",\n                    fontSize: \"12px\",\n                    fontWeight: \"600\",\n                  }}\n                >\n                  üóëÔ∏è X√≥a b√†i t·∫≠p\n                </button>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default AdminPage;\n","size_bytes":30025}},"version":2}